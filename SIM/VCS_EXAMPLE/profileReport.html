<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitionareport.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <link href='style.css' rel='stylesheet' type='text/css' />
        <script type="text/javascript" src="profileReport/codePretty.js"></script>
    <title>Simprofile Report</title>
</head>
<body>
    <div id='simp_head'>
        <div id='simp_logo'>Simprofile Report</div>
        <div id='help_link'>
            <a target="_blank" href="https://solvnet.synopsys.com/dow_retrieve/M-2017.06/VCS_MX/vcs_mx_olh/index.html#page/USERGUIDE_HTML%2Funified_profiler.007.01.html%23" title="Visit http://solvnet.synopsys.com/ for more detailed help documentation, e.g. VCS MX/VCS MXi User Guide." >Help</a> 
        </div>
    </div>
    <div id='simp_body'>
        <div id='simp_sidebar'>
            <table id='simp_sbtb'>
            <tr id='dbtr'><td>Database:</td>
            <td><select id='dbselect'></select></td></tr>
            <tr id='typetr'><td>View:</td>
            <td><select id='typeselect'></select></td></tr>
            <tr id='snaptr'><td>Snapshot:</td>
            <td><select id='snapselect'></select></td></tr>
            <tr id='rdbtr' style='display:none'><td>Ref. Database:</td>
            <td><select id='rdbselect'></select></td></tr>
            <tr id='rtypetr' style='display:none'><td>Ref. View:</td>
            <td><select id='rtypeselect'></select></td></tr>
            <tr id='rsnaptr' style='display:none'><td>Ref. Snapshot:</td>
            <td><select id='rsnapselect'></select></td></tr>
            <tr><td colspan=2><input type='button' class='input_button' id='confirm' name='confirm' value='GO' onclick='report.loadXml()'></td></tr>
            </table>
        </div>
        <div>
            <div id='simp_main'>
            </div>
            <div id='simp_board'>
            </div>
        </div>
    </div>
    <script type='text/javascript'>

var TOOLTIP = {"VERILOG" : "needed by VCS MX to simulate the SystemVerilog/Verilog code.", 
               "KERNEL" : "devoted to event scheduling, delay computing, etc.The specifics are determined both by your design, simulation activities, and by the compilation switches that you use. Please consult 'VCS-MX User Guide' to understand the effects of the switches you use. Please ask your FAE, or open a support center case, if you have more detailed questions.", 
               "Value Change Dumping" : "needed by VCS MX to write a simulation history VCD or VPD file.", 
               "PLI/DPI/DirectC" : "needed by VCS MX to simulate the C/C++ in a PLI, DPI, or DirectC application.", 
               "HSIM" : "devoted to port-connection evaluation, combo-logic evaluation, XMR evaluation, etc. The specifics are determined both by your design, simulation activities, and by the compilation switches that you use. Please consult 'VCS-MX User Guide' to understand the effects of the switches you use. Please ask your FAE, or open a support center case, if you have more detailed questions.", 
               "CONSTRAINT" : "needed to solve and simulate the SystemVerilog constraint blocks.",
               "VHDL" : "needed by VCS MX to simulate the VHDL code design.",
               "VPD" : "needed by VCS MX to write a VPD file.",
               "VCD" : "needed by VCS MX to write a VCD file.",
               "Garbage Collection" : "needed by VCS MX kernel to perform automatic garbage collection on objects that they no longer use.",
               "COVERAGE" : "needed for functional coverage.",
               "DEBUG" : "needed by VCS MX to simulate the debugging capabilities of DVE and the UCLI or to write a simulation history VCD or VPD file.",
               "Library/Executable" : "the sum of the VCS MX and Third-party sub-components.",
               "Anonymous" : "used to track memory consumption not managed by VCS, usually they can be introduced by third-party library or when some very specific memory allocation mechansim (e.g. mmap) is being used in PLI/DPI code.",
               "ASSERTION_KERNEL" : "devoted to assertion, etc. The specifics are determined both by your design, simulation activities, and by the compilation switches that you use. Please consult 'VCS-MX User Guide' to understand the effects of the switches you use. Please ask your FAE, or open a support center case, if you have more detailed questions.",
               "SystemC" : "needed for SystemC simulation."};

var ALL_CAPS = ["read", "read_write", "callback", "callback_all", "force", "static"];
function RptCode(input, mid){
    this.fdir = "";
    this.fname = "";
    this.dir = "";
    this.line = 0;
    this.topline = 0;
    this.bottomline = 0;
    this.preend = 0;
    this.tdatasize = 0;
    this.hasmore = true;
    this.ispre = false;
    this.node = null;
    this.beginline = 0;
    this.endline = 0;
    this.data = [];
    this.isfirstopen = true;
    this.winhdl = null;
    this.genCode(input, mid);
}
var PLI_MAJOR_STAT = ["enabled", "used", "unused"];
var PLI_MINOR_STAT = [
    {
        key_suffix:"", 
        need_prefix:true, 
        name_suffix:" module no.", 
        has_details:true
    },
    {
        key_suffix:"_percent", 
        name_suffix:"percentage",
        value_type:"percent"
    },
    {
        key_suffix:"_time", 
        need_prefix:true, 
        name_suffix:" module time",
        value_type:"time"
    },
    {
        key_suffix:"_time_percent", 
        need_prefix:false, 
        name_suffix:"percentage",
        value_type:"percent"
    }
];

RptCode.prototype = {
    genCode : function(url, mid){
                  this.fdir = url.substr(0, url.lastIndexOf('/'));
                  this.fname  = url.substr(url.lastIndexOf('/')+1, url.lastIndexOf(':')-(url.lastIndexOf('/')+1));
                  this.dir = document.URL.substr(0, url.lastIndexOf('/'));
                  if (mid) {
                      this.lines = report.core.mods[mid].lines;
                  }

                  if(url.lastIndexOf('-') < url.lastIndexOf(':')){
                      this.line = url.substr(url.lastIndexOf(':')+1);
                      this.beginline = this.line;
                      this.endline = this.line;
                  }
                  else{
                      this.beginline = url.substr(url.lastIndexOf(':')+1, url.lastIndexOf('-')-(url.lastIndexOf(':')+1));
                      this.endline = url.substr(url.lastIndexOf('-')+1);
                      this.line = this.beginline;
                  }
                  this.topline = Math.floor(this.line/500)*500+1;
                  this.bottomline = Math.floor(this.endline/500)*500 + 500;

                  this.line = this.topline;
                  if (this.fdir == "")
                      this.displayData("./"+this.fname);
                  else
                      this.displayData(this.fdir+'/'+this.fname);

              },

    openWin : function(){
                  this.winhdl = window.open('', '', 'height=600, width=800, top=0, left=0, toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, status=no');
                  var headID = this.winhdl.document.getElementsByTagName("head")[0];

                  var cssNode = document.createElement("style");
                  cssNode.innerHTML = '.pln{color:#600}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#00ff00}.com{800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold} .atn{color:#404}.atv{color:#060}}pre.codepretty{        padding:0px;    background:#eff5f9;     overflow:hidden;        font-size:16px; line-height:20px;       word-wrap:break-word;   font-weight: normal;}ol.linenums{       margin-top:0;   margin-bottom:0;        padding-left:0}pre.codepretty>p{    padding:2px 10px;   margin:0px;    background-color:#bbdae5;    cursor:pointer}pre.codepretty ol{    margin:1px solid #00008b;    border-left:solid #f0ffff;}pre.codepretty ol li{    margin:0;     list-style-type:none    background-color:#c0c0c0}pre.codepretty ol li.active{   background-color:#fffff0}pre.prettyDone{        padding:0px;    background:#eff5f9;     overflow:hidden;        font-size:16px; line-height:20px;       word-wrap:break-word;   font-weight: normal;}pre.prettyDone>p{    padding:2px 10px;    margin:0px;    background-color:#bbdae5;    cursor:pointer}pre.prettyDone ol{    margin:1px solid #00008b;    border-left:solid #f0ffff;}pre.prettyDone ol li{    margin:0;      list-style-type:none    background-color:#c0c0c0}pre.prettyDone ol li.active{   background-color:#fffff0}pre.linenumbers {  width: auto;  background-color: #EEE;  float: left;  margin: 0;  color: #888;  text-align: right;  font-size:16px;  line-height:20px;  font-weight: normal;}'
                  headID.appendChild(cssNode);

              },

    readData : function(){
                try {
                   netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
                   //Get file handle
                   var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
                   file.initWithPath(this.fdir);
                   file.append(this.fname);
                   if(!file.exists()){
                       alert("File '"+ this.fdir + this.fname + "' is not found.");
                       return false;
                   }
                   else if(!file.isReadable()){
                       alert("File '"+ this.fdir + this.fname + "' don't have read permissions.");
                       return false;
                   }
                   //Open an input stream from file
                   if (report.core.dbs[report.core.status.curDB]) {
                       if(file.lastModifiedTime/1000 > report.core.dbs[report.core.status.curDB].simvtime + 1){
                            alert("source file has been modified after simulation finished");
                       }
                   }
                   var istream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
                   istream.init(file, 0x01, 00004, 0);
                   istream.QueryInterface(Components.interfaces.nsILineInputStream);
                   istream.QueryInterface(Components.interfaces.nsISeekableStream);

                   //Read lines into array
                   var line = {}, data = [], totaldata = [];
                   var lineCount = 1;

                   if(this.isPre){
                       do{
                           istream.readLine(line);
                           if(lineCount >= this.topline){
                               data.push(line.value+'\n');
                           }
                           lineCount++;
                       }while(lineCount<=this.preend)
                   }
                   else{
                       if(this.tdatasize){
                           istream.seek(0,this.tdatasize);
                           do{
                               this.hasmore = istream.readLine(line);
                               data.push(line.value+'\n');
                               lineCount++;
                           }while(this.hasmore && lineCount<=500)
                           totaldata = data;
                       }
                       else{
                           do{
                               this.hasmore = istream.readLine(line);
                               totaldata.push(line.value+'\n');
                               if(lineCount >= this.topline){
                                   data.push(line.value+'\n');
                               }
                               lineCount++;
                           }while(this.hasmore && lineCount<=this.bottomline)
                           this.bottomline = lineCount-1;
                       }

                       for(var i = 0; i<totaldata.length; i++){
                           this.tdatasize = this.tdatasize + totaldata[i].length;
                       }
                   }

                   this.data = data;
                   delete data;
                   istream.close();
               } catch (e) {
                   var req = createXHR();
                   var url = "http://" + report.host + "/real/" + this.fdir + "/" + this.fname + window.location.search
                            + "&" + "topline=" + this.topline + "&" + "bottomline=" + this.bottomline;
                   req.open("GET", url, false);
                   req.send();
                   this.br = true;
                   this.data = req.responseText.split('\n');
                   if (this.data.length<500) {
                        this.hasmore = false;
                        this.bottomline = this.data.length + this.topline;
                   }
               }
               },

    displayData : function(){
                  var codeNode = document.createElement("div");
                  codeNode.id = "simp_code";
                  if(this.readData() == false){
                      return;
                  }
                  this.openWin();
                  this.winhdl.document.title = arguments[0];
                  var mainbodyNode = this.winhdl.document.getElementsByTagName("body")[0];
                  var divNode = document.createElement("div");
                  divNode.appendChild(this.crePreNode());
                  this.node = divNode;
                  this.prettyCode();
                  codeNode.appendChild(this.node);
                  mainbodyNode.appendChild(codeNode);
                  this.winhdl._RptCode = this;
                  this.winhdl._Parent = window;
                  window.childwindow = this.winhdl;
                  this.winhdl.onscroll = function(){
                      var body = this.document.getElementsByTagName("body")[0];
                      if(body.scrollTop === 0 && this._RptCode.topline !== 1){
                          this._RptCode.line = ((this._RptCode.topline*1-500)<=0?1:(this._RptCode.topline*1-500));
                          this._RptCode.preend = this._RptCode.topline*1-1;
                          this._RptCode.topline = this._RptCode.line;
                          this._RptCode.bottomline = this._RptCode.topline + 499;
                          this._RptCode.isPre = true;
                          this._RptCode.readData();
                          var divNode = document.createElement("div");
                          divNode.appendChild(this._RptCode.crePreNode());
                          this._RptCode.node = divNode;
                          this._RptCode.prettyCode();

                          body.insertBefore(this._RptCode.node, body.firstChild);
                          this._Parent.scrollHeight = 28 + (this._RptCode.preend - this._RptCode.topline)*20;
                          setTimeout("window.childwindow.document.body.scrollTop = window.scrollHeight;", 0);
                      }
                      else if(this._RptCode.isScrollBottom(body) && this._RptCode.hasmore){
                          this._RptCode.line = this._RptCode.bottomline*1+1;
                          this._RptCode.bottomline = this._RptCode.bottomline*1+500;
                          this._RptCode.topline = this._RptCode.line
                          this._RptCode.isPre = false;
                          this._RptCode.readData();
                          var divNode = document.createElement("div");
                          divNode.appendChild(this._RptCode.crePreNode());
                          this._RptCode.node = divNode;
                          this._RptCode.prettyCode();
                          body.appendChild(this._RptCode.node);
                      }
                  }

                  this.divScrollTo(mainbodyNode,6+20*(this.beginline*1%500-1));
              },

    isScrollBottom : function(node){
                         var top = parseInt(node.scrollTop);
                         var barHeight = parseInt(node.clientHeight);
                         var height = parseInt(node.scrollHeight);
                         return top+barHeight == height;
                     },
    crePreNode : function(){
                     var preNode = document.createElement("pre");
                     var ftype = this.fname.substr(this.fname.lastIndexOf('.')+1);
                     preNode.className = 'codepretty lang-' + ftype + ' linenums:' + this.line;
                     preNode.style.cssText = "margin: 0px;";
                     for(var i=0; i<this.data.length; i++){
                         this.data[i] = this.data[i].replace(new RegExp("<", "gm"), "&lt;");
                         if (this.br) {
                             preNode.innerHTML += this.data[i] + "<br>";
                         } else {
                             preNode.innerHTML += this.data[i];
                         }
                     }
                     return preNode;
                 },

    divScrollTo : function(node, offset){
                      node.scrollTop = offset;
                  },
    prettyCode : function(){
                    window.node = this.node;
                    codePretty();
                    this.node = window.node;
                    this.disLineNo();
                    this.difActive();
                 },
    disLineNo : function(node){
                   var codeSegments = this.node.childNodes;
                   var elements = [];
                   for (var i = 0, n = codeSegments.length; i < n; ++i){
                       elements.push(codeSegments[i]);
                   }
                   for (var k = 0; k < elements.length; k++) {
                       var cs = elements[k];
                       var classname = cs.className;

                       if(classname.indexOf('codepretty') >= 0){
                           var linenumbers = ""; //avoid '001' and '0500'
                           var tmpNum = this.line;

                           if(tmpNum>1 && this.bottomline >= 500){
                               if (this.lines && this.lines[tmpNum]) {
                                   linenumbers += this.lines[i] + " ";
                               }
                               linenumbers += tmpNum;
                           } else {
                               if (this.lines && this.lines[1]) {
                                   linenumbers += this.lines[i] + " ";
                               }
                               linenumbers += "01";
                           }
                           for(var i = tmpNum; i < (this.isPre?this.preend:this.bottomline); i++){
                               linenumbers += "<br />";
                               if (this.lines && this.lines[i + 1]) {
                                   linenumbers += this.lines[i + 1] + " ";
                               }

                               if(i<9)
                                   linenumbers += "0" +(i + 1);
                               else
                                   linenumbers += (i*1 + 1);
                           }
                           var lineNode;
                           lineNode = document.createElement("pre");
                           lineNode.className = "linenumbers";
                           lineNode.innerHTML = linenumbers;

                           var parent = cs.parentNode;
                           cs.className = "prettyDone";
                           parent.insertBefore(lineNode, cs);

                       }
                   }

                },
    difActive : function(){
                   var olID = this.node.childNodes[1].childNodes[0];
                       if(typeof(olID) != 'undefined'){
                       if(!(this.bottomline < this.beginline) && !(this.topline > this.endline) && (this.beginline-this.line)<500 && (this.bottomline-this.endline)<500){
                           var start = (this.line<this.beginline?this.beginline:this.line)%500;
                           var finish = (this.bottomline>this.endline?this.endline:this.bottomline)%500;
                           finish = (finish<start?finish+500:finish);

                                       for(var i = start-1; i<finish; i++){
                                               var activeID = this.node.childNodes[1].childNodes[0].childNodes[i];
                                               if(typeof(activeID) != 'undefined'){
                                   activeID.className = 'active';
                                               }
                                       }
                           }
                   }
                }
};


function RptTable(input){
    this.limit = input.limit || 20;
    this.data = input.data;
    this.title = input.title;
    this.head = input.head;
    this.total = input.total;
    this.select = input.select;
    this.pages = [];
    this.curPage = 0;
    this.odd_even = 1;
    this.nofoot = false;
    this.ctn = null;
    this.genPages();
}

RptTable.prototype = {
    genPages : function(){
        var datalength = this.data.length;
        var i = 0;
        while(1){
            this.pages[i] = {};
            this.pages[i].begin = i*this.limit;
            if(this.limit*(i+1)<datalength){
                this.pages[i].end = this.limit*(i+1);
            }else{
                this.pages[i].end = datalength;
                break;
            }
            i++;
        }
    },
    getCtn : function(){
        this.ctn = document.getElementById(this.select);
        if(!this.ctn){
            alert("Can't get container!");
        }
        while(this.ctn.firstChild){
            this.ctn.removeChild(this.ctn.firstChild);
        }
    },
    genTable : function(){
        this.getCtn();
        this.odd_even = 1;
        if(this.head != undefined){
            var objH1 = document.createElement("h1");
            objH1.innerHTML = this.head;
            this.ctn.appendChild(objH1);
        }
        this.table = document.createElement("table");
        this.table.className = "simp_table";
        if(this.title != undefined){
            var objTitle = this.table.insertRow(0);
            objTitle.className = "simp_tableTH";
            for(var i=0; i < this.title.length; i++){
                var objTH = document.createElement("th");
                objTH.innerHTML = this.title[i];
                objTitle.appendChild(objTH);
            }
        }
        if(this.data != undefined){
            var data = this.data.slice(this.pages[this.curPage].begin, this.pages[this.curPage].end);
            for(var i=0; i < data.length; i++){
                this.loadObj(data[i], 0);
            }
        }
        if(this.total != undefined){
            var objRow = this.table.insertRow(-1);
            objRow.className = "simp_total";
            for(var i=0; i < this.total.length; i++){
                var objTD = objRow.insertCell(-1);
                objTD.innerHTML = this.total[i];
            }
        }
        this.ctn.appendChild(this.table);
        if(this.nofoot == false){
            var footer = document.createElement("div");
            footer.className = "simp_tableft";
            var ignoreLeft = this.curPage >= 5;
            var ignoreRight = this.curPage <= this.pages.length - 6;
            for(var i = 0; i < this.pages.length; i++){
                var objSpan = document.createElement("span");
                if ((ignoreLeft && 2 < i && i < this.curPage - 1) ||
                    (ignoreRight && this.curPage+1 < i && i < this.pages.length- 2)) {
                    continue;
                }
                if (ignoreLeft && i == this.curPage-1) {
                    objSpan.innerHTML = "..." + "&nbsp";
                }
                var pageNum = (i+1).toString();
                if (i == this.curPage) {
                    pageNum = "<span style='font-weight: bolder;'>"+pageNum+"</span>"
                }
                if(i == 0){
                    objSpan.innerHTML = "Page: " + pageNum + "&nbsp";
                }else{
                    objSpan.innerHTML += pageNum + "&nbsp";
                }
                if (ignoreRight && i == this.curPage+1) {
                    objSpan.innerHTML += "..." + "&nbsp";
                }
                footer.appendChild(objSpan);
                objSpan._table = this;
                objSpan._page = i;
                objSpan.onclick = function(){
                    this._table.curPage = this._page;
                    this._table.genTable();
                }
            }
            this.ctn.appendChild(footer);
        }
    },
    loadObj : function(){
        var objRow = this.table.insertRow(-1);
        if(this.odd_even){
            objRow.className = "simp_odd";
            this.odd_even = 0;
        }else{
            objRow.className = "simp_even";
            this.odd_even = 1;
        }
        var linedata = arguments[0];
        if(arguments[0].child === undefined){
            //if (typeof linedata == "object") {
            //}
            for(var i = 0; i < arguments[0].length; i++){
                var objTD = objRow.insertCell(-1);
                if(typeof arguments[0][i] != "object"){
                    var parse_filename = /\.(v|sv|svh|vhdl)/;
                                        if(i != 0 && arguments[0][0] == "Source Information") {
                        if (i == 1) {
                            if (arguments[0].length <= 2) {
                                objTD.innerHTML = '<a href="javascript:void(0)" onclick = "var src=new RptCode(\''+arguments[0][i]+'\'); return false;">'+arguments[0][i]+'</a>';
                            } else {
                                objTD.innerHTML = '<a href="javascript:void(0)" onclick = "var src=new RptCode(\''+arguments[0][i]+'\','+ arguments[0][2] + '); return false;">'+arguments[0][i]+'</a>';
                            }
                        }
                        //  Comments Part for Picasso Project
                        //  else if(navigator.userAgent.indexOf("SeaMonkey")>0){
                        //              objTD.innerHTML = '<a href="javascript:void(0)" onclick = "window.status = \'Src_'+arguments[0][i] +'\';">'+arguments[0][i]+'</a>';
                        //  }
                    } else {
                        objTD.innerHTML = arguments[0][i];
                    }
                    if(i==0){
                        objTD.className = "simp_left";
                        if(TOOLTIP[arguments[0][i]]) {
                            if(this.head.match('Time')!=null) {
                                objTD.title = "CPU time in this category is " + TOOLTIP[arguments[0][i]];
                            } else {
                                objTD.title = "Memory consumption in this category is " + TOOLTIP[arguments[0][i]];
                            }
                        }
                    }else{
                        objTD.className = "simp_right";
                    }
                }else{
                    if(arguments[0][i].className != undefined){
                        objTD.className = arguments[0][i].className;
                    }else{
                        if(i==0){
                            objTD.className = "simp_left";
                            if(TOOLTIP[arguments[0][i].value]) {
                                if(this.head.match('Time')!=null) {
                                    objTD.title = "CPU time in this category is " + TOOLTIP[arguments[0][i].value];
                                } else {
                                    objTD.title = "Memory consumption in this category is " + TOOLTIP[arguments[0][i].value];
                                }
                            }
                        }else{
                            objTD.className = "simp_right";
                        }
                    }
                    if(arguments[0][i].src == 1){
                        var list = arguments[0][i].value.split("    ", 2);
                        if(list.length==2){
                            objTD.innerHTML = '<a href="javascript:void(0)" onclick = "var src=new RptCode(\''+list[1]+'\'); return false;">'+arguments[0][i].value+'</a>';
                        }else{
                            objTD.innerHTML = arguments[0][i].value;
                        }
                    }else if(arguments[0][i].src == 2){
                        objTD.innerHTML = '<a href="javascript:void(0)" onclick = "var src=new RptCode(\''+arguments[0][i].value+'\'); return false;">'+arguments[0][i].value+'</a>';
                    }else{
                        objTD.innerHTML = arguments[0][i].value;
                    }
                    if(arguments[0][i].onclick != undefined){
                        objTD.onclick = arguments[0][i].onclick;
                        objTD.className = objTD.className + " simp_cursor simp_table_blue";
                    }
                    if(arguments[0][i].aid != undefined){
                        objTD.aid = arguments[0][i].aid;
                    }
                    if(arguments[0][i].indent != undefined){
                        objTD.style.textIndent = (arguments[0][i].indent*2).toString() + "em";
                    }
                }
                if(i == 0 && arguments[0][0].indent == undefined){
                    objTD.style.textIndent = (arguments[1]*2).toString() + "em";
                }
            }
        }else{
            var html = "";
            var path = report.core.dir;
            if(arguments[0].child === "tobeload"){
                if(this.odd_even)
                    html = "<img src='" + path + "/1.png' />"
                else
                    html = "<img src='" + path + "/2.png' />"
            }else{
                if(this.odd_even)
                    html = "<img src='" + path + "/3.png' />"
                else
                    html = "<img src='" + path + "/4.png' />"
            }
            for(var i = 0; i < arguments[0].value.length; i++){
                var objTD = objRow.insertCell(-1);
                if(arguments[0].value[i].className != undefined){
                    objTD.className = arguments[0].value[i].className;
                }
                if(typeof arguments[0].value[i] != "object"){
                    if(i == 0){
                        objTD.innerHTML = html + arguments[0].value[i];
                        objTD.className = "simp_left simp_cursor simp_table_blue";
                        objTD.onclick = arguments[0].onclick;
                        objTD.aid = arguments[0].aid;
                        objTD.data = arguments[0];
                        objTD.table = this;
                        objTD.style.textIndent = (arguments[1]*2).toString() + "em";
                    }else{
                        objTD.innerHTML = arguments[0].value[i];
                        objTD.className = "simp_right";
                    }
                }else{
                    if(i == 0){
                        objTD.innerHTML = html + arguments[0].value[i].value;
                        objTD.className = "simp_left simp_cursor simp_blue";
                        objTD.onclick = arguments[0].onclick;
                        objTD.aid = arguments[0].aid;
                        objTD.data = arguments[0];
                        objTD.table = this;
                        objTD.style.textIndent = (arguments[1]*2).toString() + "em";
                    }else
                        objTD.innerHTML = arguments[0].value[i].value;
                }
            }
            if(arguments[0].child && arguments[0].child.length && arguments[0].child != "tobeload"){
                for(var i=0; i < arguments[0].child.length; i++){
                    this.loadObj(arguments[0].child[i], arguments[1]+1);
                }
            }
        }
    }
};

/* this class is used to load and store data from xml file */
function ReportCore(input){
    this.name = "ReportCore";
    this.dir = input.dir;
    // curType: 0-timeSummary 1-timeModule 2-timeInstance 3-memorySummary 4-memoryModule 5-memoryInstance 6-dynamic 7-dynamictimeline 42-plilearn
    this.status = {"curDB":0, "curType":0, "curSnap":0, "isTime":0};
    this.dbs = null;

    this.reset();
}

ReportCore.prototype = {
    reset : function(){
        this.curTotal = 1;
        this.curVerilog = 1;
        this.design = {};
        this.design.mods = {};
        this.design.modName = {};
        this.design.insts = {};
        this.mods = {};
        this.stacks = {};
        this.types = {};
        this.firstMod = null;
        this.insts = {};
        this.files = null;
        this.entries = null;
        this.dynList= [];
        this.totalTime = null;
        this.totalModuleMemValue = 0;
        this.totalModuleTimeValue = 0;
        this.totalInstMemValue = 0;
        this.totalInstTimeValue = 0;
        this.totalConstrMemValue = 0;
        this.totalConstrTimeValue = 0;
        this.totalModuleTime = [];
        this.totalModuleMem = [];
        this.totalModuleTimeId = {};
        this.totalModuleMemId = {};
        this.totalInstTime = [];
        this.totalInstMem = [];
        this.totalConstrTime = [];
        this.totalConstrMem = [];
        this.totalmtime = 0;
        this.totalmmem = 0;
        this.totalDynamic = null;
        this.totalMemory = null;
        this.sps = [];
        this.dpeak = 0;
        this.hsp = [];
        this.hpeak = 0;
        this.slots = {};
        this.solver = {};
        this.cgs = [];
        this.plilearn = {};
    },
    loadFiles : function(){
        var req = createXHR();
        var _core = this;
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/file.xml";
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var files = xmldom.getElementsByTagName("file");
        if(files && files.length){
            _core.files = [];
            for(var i = 0; i < files.length; i++){
                _core.files[i] = files[i].childNodes[0].nodeValue;
            }
        }
    },
    loadTotalData : function(){
        var req = createXHR();
        var _core = this;
        req.onreadystatechange = function(){
            if(req.readyState != 4)
                return;
            var xmldom = createParse(req.responseText);
            var time = xmldom.getElementsByTagName("time");
            if(time && time.length != 0){
                _core.totalTime = {};
                for(var i = 0; i < time.length; i++){
                    _core.totalTime[time[i].getAttribute("name")] = parseInt(time[i].getAttribute("value"));
                }
            }
            var memory = xmldom.getElementsByTagName("memory");
            if(memory && memory.length != 0){
                _core.totalMemory = {};
                for(var i = 0; i < memory.length; i++){
                    _core.totalMemory[memory[i].getAttribute("name")] = parseInt(memory[i].getAttribute("value"));
                }
            }
            var dynamic = xmldom.getElementsByTagName("dynamic");
            if(dynamic && dynamic.length != 0){
                _core.totalDynamic = {};
                for(var i = 0; i < dynamic.length; i++){
                    _core.totalDynamic[dynamic[i].getAttribute("name")] = parseInt(dynamic[i].getAttribute("value"));
                }
            }
            if(_core.loadTotalDataCallback !== undefined){
                _core.loadTotalDataCallback();
            }
        };
        req.open("GET", "./"+_core.dir+"/TotalData.xml", true);
        req.send(null);
    },

    loadTotalConstr : function(){
        var req = createXHR();
        var _core = this;
        req.onreadystatechange = function(){
            if(req.readyState != 4)
                return;
            var xmldom = createParse(req.responseText);
            var ttypes = xmldom.getElementsByTagName("ttype");
            var mtypes = xmldom.getElementsByTagName("mtype");
            var times = xmldom.getElementsByTagName("time");
            var mems = xmldom.getElementsByTagName("mem");
            if(times && times.length != 0){
                _core.totalmtime = parseInt(times[0].getAttribute("v"));
            }
            if(mems && mems.length != 0){
                _core.totalmmem = parseInt(mems[0].getAttribute("v"));
            }
            if(ttypes && ttypes.length != 0){
                _core.totalConstrTimeValue = 0;
                _core.totalConstrTime = [];
                for(var i = 0; i < ttypes.length; i++){
                    var constr = {};
                    constr.time = parseInt(ttypes[i].getAttribute("t"));
                    _core.totalConstrTimeValue += constr.time;
                    constr.name = ttypes[i].getAttribute("a");
                    constr.isType = 1;
                    _core.totalConstrTime.push(constr);
                    var constrs = ttypes[i].getElementsByTagName("tconstr");
                    if (constrs && constrs.length != 0) {
                        for (var j = 0; j < constrs.length; j++) {
                            var constr = {};
                            constr.time = parseInt(constrs[j].getAttribute("t"));
                            constr.name = constrs[j].getAttribute("a");
                            constr.file = constrs[j].getAttribute("f");
                            constr.start = constrs[j].getAttribute("s");
                            constr.end = constrs[j].getAttribute("e");
                            constr.parent = constrs[j].getAttribute("p");
                            constr.isType = 0;
                            _core.totalConstrTime.push(constr);
                        }
                    }
                }
            }
            if(mtypes && mtypes.length != 0){
                _core.totalConstrMem = [];
                _core.totalConstrMemValue = 0;
                for(var i = 0; i < mtypes.length; i++){
                    var constr = {};
                    constr.mem = parseInt(mtypes[i].getAttribute("m"));
                    _core.totalConstrMemValue += constr.mem;
                    constr.name = mtypes[i].getAttribute("a");
                    constr.isType = 1;
                    _core.totalConstrMem.push(constr);
                    var constrs = mtypes[i].getElementsByTagName("mconstr");
                    if (constrs && constrs.length != 0) {
                        for (var j = 0; j < constrs.length; j++) {
                            var constr = {};
                            constr.mem = parseInt(constrs[j].getAttribute("m"));
                            constr.name = constrs[j].getAttribute("a");
                            constr.file = constrs[j].getAttribute("f");
                            constr.start = constrs[j].getAttribute("s");
                            constr.end = constrs[j].getAttribute("e");
                            constr.parent = constrs[j].getAttribute("p");
                            constr.isType = 0;
                            _core.totalConstrMem.push(constr);
                        }
                    }
                }
            }
            if(_core.loadTotalConstrCallback !== undefined){
                _core.loadTotalConstrCallback();
            }
        }
        req.open("GET", "./"+_core.dir+"/TotalMod.xml", true);
        req.send(null);
    },
    loadTotalModule : function(){
        var req = createXHR();
        var _core = this;
        req.onreadystatechange = function(){
            if(req.readyState != 4)
                return;
            var xmldom = createParse(req.responseText);
            var tmods = xmldom.getElementsByTagName("tmod");
            var mmods = xmldom.getElementsByTagName("mmod");
            var times = xmldom.getElementsByTagName("time");
            var mems = xmldom.getElementsByTagName("mem");
            if(times && times.length != 0){
                _core.totalmtime = parseInt(times[0].getAttribute("v"));
            }
            if(mems && mems.length != 0){
                _core.totalmmem = parseInt(mems[0].getAttribute("v"));
            }
            if(tmods && tmods.length != 0){
                _core.totalModule = [];
                _core.totalModuleTimeValue = 0;
                for(var i = 0; i < tmods.length; i++){
                    mod = {};
                    mod.time = parseInt(tmods[i].getAttribute("t"));
                    mod.itime = parseInt(tmods[i].getAttribute("r"));
                    mod.inst = tmods[i].getAttribute("i");
                    mod.cinst = tmods[i].getAttribute("c");
                    mod.file = tmods[i].getAttribute("f");
                    mod.begin = tmods[i].getAttribute("s");
                    mod.end = tmods[i].getAttribute("e");
                    mod.name = tmods[i].getAttribute("a");
                    mod.id = tmods[i].getAttribute("d");
                    _core.totalModuleTime.push(mod);
                    _core.totalModuleTimeId[mod.id] = mod;
                    _core.totalModuleTimeValue += mod.time;
                }
            }
            if(mmods && mmods.length != 0){
                _core.totalModule = [];
                _core.totalModuleMemValue = 0;
                for(var i = 0; i < mmods.length; i++){
                    mod = {};
                    mod.mem = parseInt(mmods[i].getAttribute("m"));
                    mod.imem = parseInt(mmods[i].getAttribute("n"));
                    mod.inst = mmods[i].getAttribute("i");
                    mod.cinst = mmods[i].getAttribute("c");
                    mod.file = mmods[i].getAttribute("f");
                    mod.begin = mmods[i].getAttribute("s");
                    mod.end = mmods[i].getAttribute("e");
                    mod.name = mmods[i].getAttribute("a");
                    mod.id = mmods[i].getAttribute("d");
                    _core.totalModuleMem.push(mod);
                    _core.totalModuleMemId[mod.id] = mod;
                    _core.totalModuleMemValue += mod.mem;
                }
            }
            if(_core.loadTotalModuleCallback !== undefined){
                _core.loadTotalModuleCallback();
            }
        }
        req.open("GET", "./"+_core.dir+"/TotalMod.xml", true);
        req.send(null);
    },
    loadTotalInst : function() {
        var req = createXHR();
        var _core = this;
        req.onreadystatechange = function(){
            if(req.readyState != 4)
                return;
            var xmldom = createParse(req.responseText);
            var tinsts = xmldom.getElementsByTagName("tinst");
            var minsts = xmldom.getElementsByTagName("minst");
            var times = xmldom.getElementsByTagName("time");
            var mems = xmldom.getElementsByTagName("mem");
            if(times && times.length != 0){
                _core.totalmtime = parseInt(times[0].getAttribute("v"));
            }
            if(mems && mems.length != 0){
                _core.totalmmem = parseInt(mems[0].getAttribute("v"));
            }
            if(tinsts && tinsts.length != 0){
                _core.totalInstTime = [];
                _core.totalInstTimeValue = 0;
                for(var i = 0; i < tinsts.length; i++){
                    var inst = {};
                    inst.time = parseInt(tinsts[i].getAttribute("t"));
                    inst.etime = parseInt(tinsts[i].getAttribute("et"));
                    inst.file = tinsts[i].getAttribute("f");
                    inst.begin = tinsts[i].getAttribute("s");
                    inst.name = tinsts[i].getAttribute("a");
                    _core.totalInstTime.push(inst);
                    _core.totalInstTimeValue += inst.etime;
                }
            }
            if(minsts && minsts.length != 0){
                _core.totalInstMem = [];
                _core.totalInstMemValue += 0;
                for(var i = 0; i < minsts.length; i++){
                    var inst = {};
                    inst.mem = parseInt(minsts[i].getAttribute("m"));
                    inst.emem = parseInt(minsts[i].getAttribute("em"));
                    inst.file = minsts[i].getAttribute("f");
                    inst.begin = minsts[i].getAttribute("s");
                    inst.name = minsts[i].getAttribute("a");
                    _core.totalInstMem.push(inst);
                    _core.totalInstMemValue += inst.emem;
                }
            }
            if(_core.loadTotalInstCallback !== undefined){
                _core.loadTotalInstCallback();
            }
        }
        req.open("GET", "./"+_core.dir+"/TotalMod.xml", true);
        req.send(null);
    },
    loadInfoXml : function(){
        var req = createXHR();
        var _core = this;
        req.onreadystatechange = function(){
            if(req.readyState != 4)
                return;
            var xmldom = createParse(req.responseText);
            var dbs = xmldom.getElementsByTagName("database");
            if(dbs && dbs.length != 0){
                _core.dbs = [];
                for(var i = 0; i < dbs.length; i++){
                    var dbInfo = {};
                    dbInfo.name = dbs[i].getAttribute("name");
                    dbInfo.report = dbs[i].getAttribute("report");
                    dbInfo.time = dbs[i].getAttribute("time");
                    dbInfo.memory = dbs[i].getAttribute("memory");
                    dbInfo.evntc = dbs[i].getAttribute("evntc");
                    dbInfo.dynamic = dbs[i].getAttribute("dynamic");
                    dbInfo.plilearn = dbs[i].getAttribute("plilearn");
                    dbInfo.msp = parseInt(dbs[i].getAttribute("msp"));
                    dbInfo.start = parseInt(dbs[i].getAttribute("start"));
                    dbInfo.stop = parseInt(dbs[i].getAttribute("stop"));
                    dbInfo.dsp = parseInt(dbs[i].getAttribute("dsp"));
                    dbInfo.builddate = dbs[i].getAttribute("builddate");
                    dbInfo.cversion = dbs[i].getAttribute("cversion");
                    dbInfo.rversion = dbs[i].getAttribute("rversion");
                    dbInfo.createdata = dbs[i].getAttribute("createdata");
                    dbInfo.user = dbs[i].getAttribute("user");
                    dbInfo.host = dbs[i].getAttribute("host");
                    dbInfo.cputime = parseFloat(dbs[i].getAttribute("cputime"));
                    dbInfo.simvtime = parseInt(dbs[i].getAttribute("simvtime"));
                    dbInfo.memsize = parseFloat(dbs[i].getAttribute("memsize"));
                    dbInfo.snapshot = parseFloat(dbs[i].getAttribute("snapshot"));
                    dbInfo.timeline = parseFloat(dbs[i].getAttribute("timeline"));
                    dbInfo.nosolver = parseInt(dbs[i].getAttribute("nosolver"));
                    dbInfo.filter = "&lt;" + dbs[i].getAttribute("ft")+ " %";
                    dbInfo.light = parseInt(dbs[i].getAttribute("light"));
                    dbInfo.counter = parseInt(dbs[i].getAttribute("counter"));
                    dbInfo.clock = parseInt(dbs[i].getAttribute("clock_signals"));
                    if(dbs[i].childNodes.length > 0){
                        dbInfo.slots = [];
                        for(var j = 0; j < dbs[i].childNodes.length; j = j+1){
                            if (dbs[i].childNodes[j].nodeName == "slot") {
                                var slot = {};
                                slot.name = dbs[i].childNodes[j].getAttribute("name");
                                slot.viewopt = dbs[i].childNodes[j].getAttribute("viewopt");
                                slot.time = dbs[i].childNodes[j].getAttribute("time");
                                slot.mem = dbs[i].childNodes[j].getAttribute("mem");
                                dbInfo.slots.push(slot);
                            }
                        }
                    }
                    _core.dbs[i] = dbInfo;
                }
            }
            var cmd = xmldom.getElementsByTagName("report_command");
            if(cmd && cmd.length != 0)
                _core.cmd = cmd[0].getAttribute("value");                 
                                                                              
            var comp_cmd = xmldom.getElementsByTagName("compile_command");
            if(comp_cmd && comp_cmd.length != 0){                         
                _core.comp_cmd = [];                                      
                for(var i = 0; i < comp_cmd.length; i++){                 
                    _core.comp_cmd[i] = comp_cmd[i].getAttribute("value");
                }                                                         
            }

            var simv_cmd = xmldom.getElementsByTagName("simv_command");
            if(simv_cmd && simv_cmd.length != 0)
                _core.simv_cmd = simv_cmd[0].getAttribute("value");                                                              

            if(_core.loadInfoXmlCallback !== undefined){
                _core.loadInfoXmlCallback();
            }
        }
        req.open("GET", "./"+_core.dir+"/SimpInfo.xml", true);
        req.send(null);
    },
    loadTimeOrMemoryCoverage : function() {
        var url = this.genUrl(0);
        var req = createXHR();
        var _core = this
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var totalsize = xmldom.getElementsByTagName("total");
        if(totalsize && totalsize.length){
            _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
        }
        _core.curVerilog = 0;
        var totalverilog = xmldom.getElementsByTagName("totalv");
        if(totalverilog && totalverilog.length){
            _core.curVerilog = parseInt(totalverilog[0].childNodes[0].nodeValue);
        }
        var cgs = xmldom.getElementsByTagName("cg");
        _core.cgs = [];
        if(cgs && cgs.length != 0){
            for(var i = 0; i < cgs.length; i++){
                var cg = {};
                cg.name = cgs[i].getAttribute("n");
                cg.value = parseInt(cgs[i].getAttribute("v"));
                cg.fileid = parseInt(cgs[i].getAttribute("f"));
                cg.start = cgs[i].getAttribute("s");
                cg.end = cgs[i].getAttribute("e");
                cg.child = [];
                cg.insts = [];
                if(cgs[i].childNodes.length > 2){
                    for(var j = 1; j < cgs[i].childNodes.length; j=j+2){
                        var cnode = cgs[i].childNodes[j];
                        if(cnode.nodeName == "ccg"){
                            var ccg = {};
                            ccg.name = cnode.getAttribute("n");
                            ccg.value = parseInt(cnode.getAttribute("v"));
                            ccg.fileid = parseInt(cnode.getAttribute("f"));
                            ccg.start = cnode.getAttribute("s");
                            ccg.end = cnode.getAttribute("e");
                            cg.child.push(ccg);
                        }else if(cnode.nodeName == "fcg"){
                            var fcg = {}
                            fcg.name = cnode.getAttribute("n");
                            fcg.value = parseInt(cnode.getAttribute("v"));
                            if(cnode.childNodes.length > 2){
                                fcg.child = [];
                                for(var k = 1; k < cnode.childNodes.length; k=k+2){
                                    var fccg = {};
                                    fccg.name = cnode.childNodes[k].getAttribute("n");
                                    fccg.value = parseInt(cnode.childNodes[k].getAttribute("v"));
                                    fcg.child.push(fccg);
                                }
                            }
                            cg.insts.push(fcg)
                        }
                    }
                }
                _core.cgs.push(cg);
            }
        }
    },
    loadTimeOrMemorySlot : function(){
        var url = this.genUrl(0);
        var req = createXHR();
        var _core = this;
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var totalsize = xmldom.getElementsByTagName("total");
        if(totalsize && totalsize.length){
            _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
        }
        var totalverilog = xmldom.getElementsByTagName("totalv");
        if(totalverilog && totalverilog.length){
            _core.curVerilog = parseInt(totalverilog[0].childNodes[0].nodeValue);
        }
        var columns = xmldom.getElementsByTagName("column");
        _core.slot_columns = [];
        is_mulcol = 0;
        if(columns && columns.length != 0){
            is_mulcol = 1;
            for(var i = 0; i < columns.length; i++){
                column = columns[i].childNodes[0].nodeValue;
                _core.slot_columns[_core.slot_columns.length] = column;
            }
        }
        var slots = xmldom.getElementsByTagName("slot");
        _core.slots = {};
        if(slots && slots.length != 0){
            for(var i = 0; i < slots.length; i++){
                var slot = {};
                slot.name = slots[i].getAttribute("name");
                slot.value = slots[i].getAttribute("value");
                slot.colValues = {};
                if (is_mulcol) {
                    for(var colIdx = 0; colIdx < _core.slot_columns.length; colIdx++){
                        colValue = slots[i].getAttribute(_core.slot_columns[colIdx]);
                        slot.colValues[_core.slot_columns[colIdx]] = colValue;
                    }
                }
                slot.root = 1;
                if(slots[i].childNodes.length > 2){
                    slot.child = [];
                    for(var j = 1; j < slots[i].childNodes.length; j = j+2){
                        var name = slots[i].childNodes[j].getAttribute("name");
                        slot.child.push(name);
                    }
                }
                _core.slots[slot.name] = slot;
            }
        }
    },
    loadTimeOrMemoryEntry : function(){
        var url = this.genUrl(0);
        var req = createXHR();
        var _core = this;
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var totalsize = xmldom.getElementsByTagName("total");
        if(totalsize && totalsize.length){
            _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
        }
        var totalverilog = xmldom.getElementsByTagName("totalv");
        if(totalverilog && totalverilog.length){
            _core.curVerilog = parseInt(totalverilog[0].childNodes[0].nodeValue);
        }
        var entries = xmldom.getElementsByTagName("entry");
        if(entries && entries.length != 0){
            _core.entries = {};
            for(var i = 0; i < entries.length; i++){
                var entry = {};
                entry.name = entries[i].getAttribute("name");
                entry.value = parseInt(entries[i].getAttribute("value"));
                entry.root = 1;
                if(entries[i].childNodes.length > 2){
                    entry.child = [];
                    for(var j = 1; j < entries[i].childNodes.length; j = j+2){
                        var name = entries[i].childNodes[j].getAttribute("name");
                        entry.child.push(name);
                    }
                }
                _core.entries[entries[i].getAttribute("name")] = entry;
            }
        }
    },
    loadTimeOrMemoryConstr : function(){
        var url = this.genUrl(0);
        var req = createXHR();
        var _core = this;
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var totalsize = xmldom.getElementsByTagName("total");
        if(totalsize && totalsize.length){
            _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
        }
        var totalverilog = xmldom.getElementsByTagName("totalv");
        if(totalverilog && totalverilog.length){
            _core.curVerilog = parseInt(totalverilog[0].childNodes[0].nodeValue);
        }
        var types = xmldom.getElementsByTagName("type");
        _core.types = {};
        if(types && types.length != 0){
            for(var i = 0; i < types.length; i++){
                var type = {};
                type.value = parseInt(types[i].getAttribute("value"));
                if(types[i].childNodes.length > 2){
                    type.constr = [];
                    for(var j = 1; j < types[i].childNodes.length; j = j+2){
                        if(types[i].childNodes[j].nodeName=="constr"){
                            var constr = {};
                            constr.value = parseInt(types[i].childNodes[j].getAttribute("value"));
                            constr.id = parseInt(types[i].childNodes[j].getAttribute("id"));
                            constr.mid = parseInt(types[i].childNodes[j].getAttribute("mid"));
                            type.constr.push(constr);
                        }
                    }
                }
                _core.types[types[i].getAttribute("name")] = type;
            }
        }
    },
    loadTimeOrMemoryModule : function(){
        var dbCnt = 0;
        var url = this.genUrl(dbCnt);
        var req = createXHR();
        var _core = this;
        req.open("GET", url, false);
        req.send(null);
        _core.firstMod = 0;
        var lastMod = null;
        var idNum = 0;
        var idCount = 'p' + idNum;
        while(1){
            var xmldom = createParse(req.responseText);
            var totalsize = xmldom.getElementsByTagName("total");
            if(totalsize && totalsize.length){
                _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
            }
            var totalverilog = xmldom.getElementsByTagName("totalv");
            if(totalverilog && totalverilog.length){
                _core.curVerilog = parseInt(totalverilog[0].childNodes[0].nodeValue);
            }
            var mods = xmldom.getElementsByTagName("module");
            var params = xmldom.getElementsByTagName("param");
            if(mods && mods.length != 0){
                for(var i = 0; i < mods.length; i++){
                    var mod = {};
                    mod.value = parseInt(mods[i].getAttribute("value"));
                    if (mods[i].getAttribute("svalue") != null) {
                        mod.svalue = parseInt(mods[i].getAttribute("svalue"));
                    }
                    if(mods[i].getAttribute("ivalue") != null)
                    {
                        mod.ivalue = parseInt(mods[i].getAttribute("ivalue"));
                        mod.id = parseInt(mods[i].getAttribute("id"));
                        _core.mods[mod.id]=mod;
                        if(!lastMod){
                            _core.firstMod = mod;
                        }else{
                            lastMod.next = mod;
                        }
                        lastMod = mod;

                        if(mods[i].childNodes.length > 2){
                            mod.constr = {};
                            mod.inst = [];
                            mod.itotal = 0;
                            mod.ctotal ={};
                            mod.ifilter = 0;
                            mod.ids = {}
                            mod.lines = {};
                            childconstr = [];
                            for(var j = 1; j < mods[i].childNodes.length; j = j+2){
                                if(mods[i].childNodes[j].nodeName=="constr"){
                                    var constr = {};
                                    constr.child = [];
                                    constr.id = parseInt(mods[i].childNodes[j].getAttribute("id"));
                                    constr.value = parseInt(mods[i].childNodes[j].getAttribute("value"));
                                    if (mods[i].childNodes[j].getAttribute("pid")) {
                                        constr.pid = parseInt(mods[i].childNodes[j].getAttribute("pid"));
                                        childconstr.push(constr);
                                    } else {
                                        var type = mods[i].childNodes[j].getAttribute("t");
                                        if(mod.constr[type] == undefined){
                                            mod.constr[type] = [];
                                            mod.ctotal[type] = 0;
                                        }
                                        mod.ctotal[type] += constr.value;
                                        mod.constr[type].push(constr);
                                        mod.hasConstr = 1;
                                    }
                                    mod.ids[constr.id] = constr;
                                }else if(mods[i].childNodes[j].nodeName=="inst"){
                                    var inst = {};
                                    inst.id = parseInt(mods[i].childNodes[j].getAttribute("id"));
                                    inst.value = parseInt(mods[i].childNodes[j].getAttribute("value"));
                                    inst.ivalue = parseInt(mods[i].childNodes[j].getAttribute("ivalue"));
                                    mod.itotal += inst.ivalue;
                                    if (inst.ivalue!=0) {
                                        mod.inst.push(inst);
                                    }
                                    inst.mads = [];
                                    for(var k = 1; k < mods[i].childNodes[j].childNodes.length; k = k+2){
                                        var mad = {};
                                        mad.mid = parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("mid"));
                                        mad.value = parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("value"));
                                        inst.mads.push(mad);
                                    }
                                }else if(mods[i].childNodes[j].nodeName=="cf"){
                                    var constr = {};
                                    constr.filter = 1;
                                    constr.value = parseInt(mods[i].childNodes[j].getAttribute("v"));
                                    if(!constr.value)
                                        continue;
                                    var type = mods[i].childNodes[j].getAttribute("n");
                                    if(mod.constr[type] == undefined){
                                        mod.constr[type] = [];
                                        mod.ctotal[type] = 0;
                                    }
                                    mod.ctotal[type] += constr.value;
                                    mod.constr[type].push(constr);
                                    mod.hasConstr = 1;
                                }else if(mods[i].childNodes[j].nodeName=="if"){
                                    mod.ifilter = parseInt(mods[i].childNodes[j].getAttribute("v"));
                                    mod.itotal += mod.ifilter;
                                }else if(mods[i].childNodes[j].nodeName=="l"){
                                    var value = mods[i].childNodes[j].getAttribute("value");
                                    var d = formatData(value, true) + " " + (value*100.0/report.core.curTotal).toFixed(2).toString() + "%";
                                    while(d.length<18){
                                        d = " " + d;
                                    }
                                    mod.lines[parseInt(mods[i].childNodes[j].getAttribute("i"))] = d;
                                }
                            }
                            for (var j = 0; j < childconstr.length; j++) {
                                mod.ids[childconstr[j].pid].child.push(childconstr[j]);
                            }
                        }
                    } else {

                        if(!lastMod){
                            _core.firstMod = mod;
                        }else{
                            lastMod.next = mod;
                        }
                        lastMod = mod;

                        mod.id = idCount;
                        _core.mods[mod.id]=mod;
                        idNum++;
                        idCount = 'p' + idNum;

                        mod.name = mods[i].getAttribute("name");
                        mod.params = [];
                        for(var j = 1; j < mods[i].childNodes.length; j = j+2){
                            if(mods[i].childNodes[j].nodeName=="param"){


                                var param = {};
                                param.child = [];
                                param.lines = {};
                                param.id = parseInt(mods[i].childNodes[j].getAttribute("id"));
                                param.value = parseInt(mods[i].childNodes[j].getAttribute("value"));
                                param.ivalue = parseInt(mods[i].childNodes[j].getAttribute("ivalue"));
                                _core.mods[param.id]=param;


//                    if(i == 0){
//                        _core.firstMod = param;
//                    }else{
//                        lastMod.next = param;
//                  }
//                  lastMod = param;
//
                                if(mods[i].childNodes[j].childNodes.length > 2){
                                    param.constr = {};
                                    param.inst = [];
                                    param.itotal = 0;
                                    param.ctotal ={};
                                    param.ifilter = 0;
                                    param.ids = {};
                                    param.lines = {};
                                    childconstr = [];
                                    for(var k = 1; k < mods[i].childNodes[j].childNodes.length; k = k+2){
                                        if(mods[i].childNodes[j].childNodes[k].nodeName=="constr"){
                                            var constr = {};
                                            constr.child = [];
                                            constr.id =
                                                parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("id"));
                                            constr.value =
                                                parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("value"));
                                            if (mods[i].childNodes[j].childNodes[k].getAttribute("pid")) {
                                                constr.pid =
                                                    parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("pid"));
                                                childconstr.push(constr);
                                            } else {
                                                var type =
                                                    mods[i].childNodes[j].childNodes[k].getAttribute("t");
                                                if(param.constr[type] == undefined){
                                                    param.constr[type] = [];
                                                    param.ctotal[type] = 0;
                                                }
                                                param.ctotal[type] += constr.value;
                                                param.constr[type].push(constr);
                                                param.hasConstr = 1;
                                            }
                                            param.ids[constr.id] = constr;
                                        }else if(mods[i].childNodes[j].childNodes[k].nodeName=="inst"){
                                            var inst = {};
                                            inst.id =
                                                parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("id"));
                                            inst.value =
                                                parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("value"));
                                            param.itotal += inst.value;
                                            param.inst.push(inst);
                                        }else if(mods[i].childNodes[j].childNodes[k].nodeName=="cf"){
                                            var constr = {};
                                            constr.filter = 1;
                                            constr.value =
                                                parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("v"));
                                            if(!constr.value)
                                                continue;
                                            var type = mods[i].childNodes[j].childNodes[k].getAttribute("n");
                                            if(param.constr[type] == undefined){
                                                param.constr[type] = [];
                                                param.ctotal[type] = 0;
                                            }
                                            param.ctotal[type] += constr.value;
                                            param.constr[type].push(constr);
                                            param.hasConstr = 1;
                                        }else if(mods[i].childNodes[j].childNodes[k].nodeName=="if"){
                                            param.ifilter =
                                                parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("v"));
                                            param.itotal += param.ifilter;
                                        }else if(mods[i].childNodes[j].childNodes[k].nodeName=="l"){
                                            var value = mods[i].childNodes[j].childNodes[k].getAttribute("value");
                                            var d = formatData(value, true) + " " + (value*100.0/report.core.curTotal).toFixed(2).toString() + " %";
                                            param.lines[parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("i"))] = d;
                                        }else if(mods[i].childNodes[j].childNodes[k].nodeName=="l"){
                                            var value = mods[i].childNodes[j].childNodes[k].getAttribute("value");
                                            var d = formatData(value, true) + " " + (value*100.0/report.core.curTotal).toFixed(2).toString() + " %";
                                            param.lines[parseInt(mods[i].childNodes[j].childNodes[k].getAttribute("i"))] = d;
                                        }
                                    }
                                }
                            }
                            mod.params.push(param);
                        }
                    }
                }
            }
            var filter = xmldom.getElementsByTagName("mf");
            if(filter && filter.length != 0){
                _core.modfilter = parseInt(filter[0].getAttribute("v"));
            }
            var cont = xmldom.getElementsByTagName("continue");
            if(cont.length != 0){
                dbCnt++;
                var url = this.genUrl(dbCnt);
                var req = createXHR();
                req.open("GET", url, false);
                req.send(null);
            }else{
                break;
            }
        }
    },
    loadTimeOrMemoryInstance : function(){
        var reset = arguments[1];
        var dbCnt = Math.floor(arguments[0]/1000);
        var url = this.genUrl(dbCnt);
        var req = createXHR();
        var _core = this;
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var totalsize = xmldom.getElementsByTagName("total");
        if(totalsize && totalsize.length){
            _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
        }
        var totalverilog = xmldom.getElementsByTagName("totalv");
        if(totalverilog && totalverilog.length){
            _core.curVerilog = parseInt(totalverilog[0].childNodes[0].nodeValue);
        }
        if(reset == 1)
            _core.insts = {};
        var insts = xmldom.getElementsByTagName("instance");
        if(insts && insts.length != 0){
            for(var i = 0; i < insts.length; i++){
                var inst = {};
                inst.name = insts[i].getAttribute("name");
                inst.value = parseInt(insts[i].getAttribute("value"));
                inst.inclvalue = parseInt(insts[i].getAttribute("incl_value"));
                if(insts[i].childNodes.length > 1){
                    inst.child = [];
                    var instNo = 0;
                    for(var j = 1; j < insts[i].childNodes.length; j = j+2){
                        inst.child.push(parseInt(insts[i].childNodes[j].childNodes[0].nodeValue));
                        instNo++;
                    }
                    inst.instNo = instNo;
                }
                _core.insts[parseInt(insts[i].getAttribute("id"))] = inst;
            }
        }
    },
    loadModule : function(){
        var req = createXHR();
        var _core = this;
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/";
        url = url + "module" + Math.floor(arguments[0]/1000).toString() + ".xml";
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var modules = xmldom.getElementsByTagName("module");
        if(modules && modules.length){
            for(var i = 0; i < modules.length; i++){
                var modObj = {};
                modObj.type = modules[i].getAttribute("type");

                //modObj.name = modules[i].getAttribute("name");

                /* add pastr information here */
                if(modules[i].getAttribute("pastr") != null)
                    modObj.name = modules[i].getAttribute("name") + " (" + modules[i].getAttribute("pastr") + ")";
                else
                    modObj.name = modules[i].getAttribute("name");
                modObj.fileid = parseInt(modules[i].getAttribute("fileid"));
                modObj.instno = modules[i].getAttribute("instno");
                modObj.cinstno = modules[i].getAttribute("cinstno");
                modObj.startline = modules[i].getAttribute("startline");
                modObj.endline = modules[i].getAttribute("endline");
                modObj.id = parseInt(modules[i].getAttribute("id"));
                ALL_CAPS.forEach(function(cap) {
                    modObj[cap] = modules[i].getAttribute(cap);
                });

                if(modules[i].childNodes.length > 2){
                    modObj.constr = {};
                    for(var j = 1; j < modules[i].childNodes.length; j = j+2){
                        var constr = {};
                        constr.name = modules[i].childNodes[j].getAttribute("name");
                        constr.type = modules[i].childNodes[j].getAttribute("type");
                        constr.fileid = modules[i].childNodes[j].getAttribute("fileid");
                        constr.line = modules[i].childNodes[j].getAttribute("line");
                        constr.end = modules[i].childNodes[j].getAttribute("end");
                        modObj.constr[parseInt(modules[i].childNodes[j].getAttribute("id"))] =  constr;
                    }
                }
                _core.design.mods[parseInt(modules[i].getAttribute("id"))] = modObj;
                _core.design.modName[modObj.name] = modObj;
            }
        }
    },


    loadTimeline : function(){
        var req = createXHR();
        var _core = this;
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/Timeline.xml";
        req.open("GET", url, false);
        req.send(null);
        _core.loadClocks();
        var xmldom = createParse(req.responseText);
        var sps = xmldom.getElementsByTagName("sp");
        if(sps && sps.length){
            for(var i = 0; i < sps.length; i++){
                var spObj = {};
                spObj.aa = parseInt(sps[i].getAttribute("aa"));
                spObj.da = parseInt(sps[i].getAttribute("da"));
                spObj.sq = parseInt(sps[i].getAttribute("sq"));
                spObj.et = parseInt(sps[i].getAttribute("et"));
                spObj.mb = parseInt(sps[i].getAttribute("mb"));
                spObj.st = parseInt(sps[i].getAttribute("st"));
                spObj.cl = parseInt(sps[i].getAttribute("cl"));
                spObj.total = parseInt(sps[i].getAttribute("total"));
                if(i < _core.dpeak){
                    _core.sps[i].info = spObj;
                }else if(i != sps.length-1){
                    _core.sps[i+1].info = spObj;
                }else{
                    _core.sps[_core.dpeak].info = spObj;
                }
            }
        }
    },
    loadClocks : function(){
        var req = createXHR();
        var _core = this;
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/Clock.xml";
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var sps = xmldom.getElementsByTagName("dsp");
        if(sps && sps.length){
            for(var i = 0; i < sps.length; i++){
                if(_core.sps[i] == undefined)
                    _core.sps[i] = {};
                _core.sps[i].cycle = parseInt(sps[i].getAttribute("clock"));
                _core.sps[i].spName = sps[i].getAttribute("spName");
                if(sps[i].getAttribute("ispeak") == "1")
                    _core.dpeak = i;
            }
        }
        var hsp = xmldom.getElementsByTagName("hsp");
        if(hsp && hsp.length){
            for(var i = 0; i < hsp.length; i++){
                if(_core.hsp[i] == undefined)
                    _core.hsp[i] = {};
                _core.hsp[i].cycle = parseInt(hsp[i].getAttribute("clock"));
                _core.hsp[i].spName = hsp[i].getAttribute("spName");
                if(hsp[i].getAttribute("ispeak") == "1"){
                    _core.hpeak = i;
                }
            }
        }
    },
    loadInstance : function(){
        var _core = this;
        if(_core.design.insts[arguments[0]]!=undefined){
            return;
        }
        var req = createXHR();
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/";
        url = url + "instance" + Math.floor(arguments[0]/1000).toString() + ".xml";
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var instances = xmldom.getElementsByTagName("instance");
        if(instances && instances.length){
            for(var i = 0; i < instances.length; i++){
                var instObj = {};
                instObj.name = instances[i].getAttribute("name");
                instObj.fullname = instances[i].getAttribute("fullname");
                instObj.mid = parseInt(instances[i].getAttribute("mid"));
                instObj.pid = parseInt(instances[i].getAttribute("pid"));
                instObj.fileid = parseInt(instances[i].getAttribute("fileid"));
                instObj.line = parseInt(instances[i].getAttribute("line"));
                _core.design.insts[parseInt(instances[i].getAttribute("id"))] = instObj;
            }
        }
    },
    loadStack : function(){
        var req = createXHR();
        var _core = this;
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/stack.xml";
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var stacks = xmldom.getElementsByTagName("stack");
        if(stacks && stacks.length){
            for(var i = 0; i < stacks.length; i++){
                var stack = {};
                stack.name = stacks[i].getAttribute("name");
                stack.cname = stacks[i].getAttribute("cname");
                stack.pid = stacks[i].getAttribute("pid");
                stack.source = stacks[i].getAttribute("source");
                var id = stacks[i].getAttribute("id");
                _core.stacks[id] = stack;
            }
        }
    },
    loadDynamic : function(){
        var req = createXHR();
        var _core = this;
        var url = _core.genUrl();
        req.onreadystatechange = function(){
            if(req.readyState != 4)
                return;
            var xmldom = createParse(req.responseText);
            var totalsize = xmldom.getElementsByTagName("total");
            if(totalsize && totalsize.length){
                _core.curTotal = parseInt(totalsize[0].childNodes[0].nodeValue);
            }
            _core.dynList = [];
            var groups = xmldom.getElementsByTagName("dynobjgroup");
            if(groups && groups.length != 0){
                for(var i = 0; i < groups.length; i++){
                    if(groups[i].childNodes.length > 2){
                       var dynobjgroup = {};
                       dynobjgroup.isgroup = 1;
                       dynobjgroup.name = groups[i].getAttribute("name");
                       dynobjgroup.value = parseInt(groups[i].getAttribute("membytes"));
                       dynobjgroup.insts = groups[i].getAttribute("insts");
                       dynobjgroup.totalinsts = groups[i].getAttribute("totalinsts");
                       dynobjgroup.dynobj = [];
                       for(var j = 1; j <groups[i].childNodes.length; j = j+2){
                          var dynobj = {};
                          dynobj.name = groups[i].childNodes[j].getAttribute("name");
                          dynobj.value = parseInt(groups[i].childNodes[j].getAttribute("membytes"));
                          dynobj.insts = groups[i].childNodes[j].getAttribute("insts");
                          dynobj.totalinsts = groups[i].childNodes[j].getAttribute("totalinsts");
                          if(groups[i].childNodes[j].childNodes.length > 2){
                             dynobj.stacks = [];
                             for(var k = 1; k < groups[i].childNodes[j].childNodes.length; k = k+2){
                                var stack = {};
                                stack.fileid = parseInt(groups[i].childNodes[j].childNodes[k].getAttribute("fileId"));
                                stack.lineno = groups[i].childNodes[j].childNodes[k].getAttribute("lineNo");
                                stack.value = parseInt(groups[i].childNodes[j].childNodes[k].getAttribute("membytes"));
                                stack.name = groups[i].childNodes[j].childNodes[k].getAttribute("name");
                                stack.insts = groups[i].childNodes[j].childNodes[k].getAttribute("insts");
                                stack.totalinsts = groups[i].childNodes[j].childNodes[k].getAttribute("totalinsts");
                                stack.id = groups[i].childNodes[j].childNodes[k].getAttribute("id");
                                dynobj.stacks.push(stack);
                             }
                          }
                          dynobjgroup.dynobj.push(dynobj);
                       }
                       _core.dynList.push(dynobjgroup);
                    }
                }
            } 
            var objs = xmldom.getElementsByTagName("dynobj");
            if(objs && objs.length != 0){
                for(var i = 0; i < objs.length; i++){
                    var dynobj = {};
                    dynobj.isgroup = 0;
                    dynobj.name = objs[i].getAttribute("name");
                    dynobj.value = parseInt(objs[i].getAttribute("membytes"));
                    dynobj.insts = objs[i].getAttribute("insts");
                    dynobj.totalinsts = objs[i].getAttribute("totalinsts");
                    if(objs[i].childNodes.length > 2){
                        dynobj.stacks = [];
                        for(var j = 1; j < objs[i].childNodes.length; j = j+2){
                            var stack = {};
                            stack.fileid = parseInt(objs[i].childNodes[j].getAttribute("fileId"));
                            stack.lineno = objs[i].childNodes[j].getAttribute("lineNo");
                            stack.value = parseInt(objs[i].childNodes[j].getAttribute("membytes"));
                            stack.name = objs[i].childNodes[j].getAttribute("name");
                            stack.insts = objs[i].childNodes[j].getAttribute("insts");
                            stack.totalinsts = objs[i].childNodes[j].getAttribute("totalinsts");
                            stack.id = objs[i].childNodes[j].getAttribute("id");
                            dynobj.stacks.push(stack);
                        }
                    }
                    _core.dynList.push(dynobj);
                }
            }
            _core.dynList = _core.dynList.sort(function(a, b) {
                return a.value < b.value ? 1 : -1;
            });
            if(_core.loadDynamicCallback != undefined){
                _core.loadStack();
                _core.loadDynamicCallback();
            }
        }
        req.open("GET", url, true);
        req.send(null);
    },
    loadTimeOrMemorySolver : function(){
        var url = this.genUrl(0);
        var req = createXHR();
        var _core = this;
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);
        var cnstProf = xmldom.getElementsByTagName("cnst_profile");
        if(cnstProf && cnstProf.length == 1){
            _core.solver.simvBaseDir = cnstProf[0].getElementsByTagName("simv_base_dir")[0].childNodes[0].nodeValue;
            if(this.status.isTime == 1){
                _core.solver.totalUTime = cnstProf[0].getElementsByTagName("total_utime")[0].childNodes[0].nodeValue;
                _core.solver.totalSTime = cnstProf[0].getElementsByTagName("total_stime")[0].childNodes[0].nodeValue;
                _core.solver.totalRandUTime = cnstProf[0].getElementsByTagName("total_randomize_utime")[0].childNodes[0].nodeValue;
                _core.solver.totalRandCount = cnstProf[0].getElementsByTagName("total_randomize_count")[0].childNodes[0].nodeValue;
                _core.solver.topContextProfs = {};
                var topContextProf = cnstProf[0].getElementsByTagName("top_context_profile_info");
                if(topContextProf && topContextProf.length == 1){
                    var contextProfs = topContextProf[0].getElementsByTagName("context_profile_info");
                    for (var i = 0; i < contextProfs.length; i++){
                        var contextProf = {};
                        contextProf.solver = contextProfs[i].getElementsByTagName("solver")[0].childNodes[0].nodeValue;
                        contextProf.ttime = contextProfs[i].getElementsByTagName("ttime")[0].childNodes[0].nodeValue;
                        _core.solver.topContextProfs[i] = contextProf;
                    }
                }
                _core.solver.topUTimeRands = {};
                var topUTimeRand = cnstProf[0].getElementsByTagName("top_utime_randomize");
                if(topUTimeRand && topUTimeRand.length){
                    var UTimeRands = topUTimeRand[0].getElementsByTagName("utime_randomize");
                    for (var i = 0; i < UTimeRands.length; i++){
                        var UTimeRand = {};
                        UTimeRand.serial = UTimeRands[i].getElementsByTagName("serial")[0].childNodes[0].nodeValue;
                        UTimeRand.file = UTimeRands[i].getElementsByTagName("file")[0].childNodes[0].nodeValue;
                        UTimeRand.line = UTimeRands[i].getElementsByTagName("line")[0].childNodes[0].nodeValue;
                        UTimeRand.visit = UTimeRands[i].getElementsByTagName("visit")[0].childNodes[0].nodeValue;
                        UTimeRand.utime = UTimeRands[i].getElementsByTagName("utime")[0].childNodes[0].nodeValue;
                        UTimeRand.vars = UTimeRands[i].getElementsByTagName("vars")[0].childNodes[0].nodeValue;
                        UTimeRand.cons = UTimeRands[i].getElementsByTagName("cons")[0].childNodes[0].nodeValue;
                        UTimeRand.cblks = UTimeRands[i].getElementsByTagName("cblks")[0].childNodes[0].nodeValue;
                        _core.solver.topUTimeRands[i] = UTimeRand;
                    }
                }
                _core.solver.topUTimeParts = {};
                var topUTimePart = cnstProf[0].getElementsByTagName("top_utime_partition");
                if(topUTimePart && topUTimePart.length == 1){
                    var UTimeParts = topUTimePart[0].getElementsByTagName("utime_partition");
                    for(var i = 0; i < UTimeParts.length; i++){
                        var UTimePart = {};
                        UTimePart.file = UTimeParts[i].getElementsByTagName("file")[0].childNodes[0].nodeValue;
                        UTimePart.line = UTimeParts[i].getElementsByTagName("line")[0].childNodes[0].nodeValue;
                        UTimePart.serial = UTimeParts[i].getElementsByTagName("serial")[0].childNodes[0].nodeValue;
                        UTimePart.visit = UTimeParts[i].getElementsByTagName("visit")[0].childNodes[0].nodeValue;
                        UTimePart.partition_id = UTimeParts[i].getElementsByTagName("partition_id")[0].childNodes[0].nodeValue;
                        UTimePart.utime = UTimeParts[i].getElementsByTagName("utime")[0].childNodes[0].nodeValue;
                        UTimePart.vars = UTimeParts[i].getElementsByTagName("vars")[0].childNodes[0].nodeValue;
                        UTimePart.cons = UTimeParts[i].getElementsByTagName("cons")[0].childNodes[0].nodeValue;
                        UTimePart.cblks = UTimeParts[i].getElementsByTagName("cblks")[0].childNodes[0].nodeValue;
                        _core.solver.topUTimeParts[i] = UTimePart;
                    }
                }
                _core.solver.topBDDParts = {};
                var topBDDPart = cnstProf[0].getElementsByTagName("top_BDD_partition");
                if(topBDDPart && topBDDPart.length == 1){
                    var BDDParts = topBDDPart[0].getElementsByTagName("BDD_partition");
                    for(var i = 0; i < BDDParts.length; i++){
                        var BDDPart = {};
                        BDDPart.file = BDDParts[i].getElementsByTagName("file")[0].childNodes[0].nodeValue;
                        BDDPart.line = BDDParts[i].getElementsByTagName("line")[0].childNodes[0].nodeValue;
                        BDDPart.visit = BDDParts[i].getElementsByTagName("visit")[0].childNodes[0].nodeValue;
                        BDDPart.serial = BDDParts[i].getElementsByTagName("serial")[0].childNodes[0].nodeValue;
                        BDDPart.partition_id = BDDParts[i].getElementsByTagName("partition_id")[0].childNodes[0].nodeValue;
                        BDDPart.peak_bdd_size = BDDParts[i].getElementsByTagName("peak_bdd_size")[0].childNodes[0].nodeValue;
                        BDDPart.final_bdd_size = BDDParts[i].getElementsByTagName("final_bdd_size")[0].childNodes[0].nodeValue;
                        BDDPart.vars = BDDParts[i].getElementsByTagName("vars")[0].childNodes[0].nodeValue;
                        BDDPart.cons = BDDParts[i].getElementsByTagName("cons")[0].childNodes[0].nodeValue;
                        BDDPart.cblks = BDDParts[i].getElementsByTagName("cblks")[0].childNodes[0].nodeValue;
                        _core.solver.topBDDParts[i] = BDDPart;
                    }
                }
                _core.solver.topAggrUTimeRands = {};
                var topAggrUTimeRand = cnstProf[0].getElementsByTagName("top_agregate_utime_randomize");
                if(topAggrUTimeRand && topAggrUTimeRand.length == 1){
                    var aggrUTimeRands = topAggrUTimeRand[0].getElementsByTagName("agregate_utime_randomize");
                    for(var i = 0; i < aggrUTimeRands.length; i++){
                        var aggrUTimeRand = {};
                        aggrUTimeRand.file = aggrUTimeRands[i].getElementsByTagName("file")[0].childNodes[0].nodeValue;
                        aggrUTimeRand.line = aggrUTimeRands[i].getElementsByTagName("line")[0].childNodes[0].nodeValue;
                        aggrUTimeRand.calls = aggrUTimeRands[i].getElementsByTagName("calls")[0].childNodes[0].nodeValue;
                        aggrUTimeRand.utime = aggrUTimeRands[i].getElementsByTagName("utime")[0].childNodes[0].nodeValue;
                        _core.solver.topAggrUTimeRands[i] = aggrUTimeRand;
                    }
                }
            }else{
                _core.solver.largestIncMem = cnstProf[0].getElementsByTagName("largest_inc_mem")[0].childNodes[0].nodeValue;
                _core.solver.topMemRands = {};
                var topMemRand = cnstProf[0].getElementsByTagName("top_mem_randomize");
                if(topMemRand && topMemRand.length){
                    var memRands = topMemRand[0].getElementsByTagName("mem_randomize");
                    for(var i = 0; i < memRands.length; i++){
                        var memRand = {};
                        memRand.serial = memRands[i].getElementsByTagName("serial")[0].childNodes[0].nodeValue;
                        memRand.file = memRands[i].getElementsByTagName("file")[0].childNodes[0].nodeValue;
                        memRand.line = memRands[i].getElementsByTagName("line")[0].childNodes[0].nodeValue;
                        memRand.visit = memRands[i].getElementsByTagName("visit")[0].childNodes[0].nodeValue;
                        memRand.mem = memRands[i].getElementsByTagName("mem")[0].childNodes[0].nodeValue;
                        memRand.vars = memRands[i].getElementsByTagName("vars")[0].childNodes[0].nodeValue;
                        memRand.cons = memRands[i].getElementsByTagName("cons")[0].childNodes[0].nodeValue;
                        memRand.cblks = memRands[i].getElementsByTagName("cblks")[0].childNodes[0].nodeValue;
                        _core.solver.topMemRands[i] = memRand;
                    }
                }
                _core.solver.topMemLineRands = {};
                var topMemLineRand = cnstProf[0].getElementsByTagName("top_mem_line_randomize");
                if(topMemLineRand && topMemLineRand.length){
                    var memLineRands = topMemLineRand[0].getElementsByTagName("mem_line_randomize");
                    for(var i = 0; i < memLineRands.length; i++){
                        var memLineRand = {};
                        memLineRand.file = memLineRands[i].getElementsByTagName("file")[0].childNodes[0].nodeValue;
                        memLineRand.line = memLineRands[i].getElementsByTagName("line")[0].childNodes[0].nodeValue;
                        memLineRand.calls = memLineRands[i].getElementsByTagName("calls")[0].childNodes[0].nodeValue;
                        memLineRand.mem = memLineRands[i].getElementsByTagName("mem")[0].childNodes[0].nodeValue;
                        _core.solver.topMemLineRands[i] = memLineRand;
                    }
                }
            }
        }
    },
    loadPLIlearn : function(){
        var req = createXHR();
        var _core = this;
        var url = this.dir + "/" + this.dbs[_core.status.curDB].report + "/plilearn.xml";
        req.open("GET", url, false);
        req.send(null);
        var xmldom = createParse(req.responseText);

        var noused = xmldom.getElementsByTagName("noused");
        if(noused && noused.length){
            noused = noused[0];
            var data = [];
            if (noused.childNodes.length > 1) {
                for(var i = 1; i < noused.childNodes.length; i+=2){
                   var name = noused.childNodes[i].getAttribute("name");
                   data.push(name);
                }
            }
            _core.plilearn["noused"] = data;
        }

        var allused = xmldom.getElementsByTagName("allused");
        if(allused && allused.length){
            allused = allused[0];
            var data = [];
            if (allused.childNodes.length > 1) {
                for(var i = 1; i < allused.childNodes.length; i+=2){
                   var name = allused.childNodes[i].getAttribute("name");
                   data.push(name);
                }
            }
            _core.plilearn["allused"] = data;
        }

        var partial = xmldom.getElementsByTagName("partial");
        if(partial && partial.length){
            partial = partial[0];
            var data = [];
            if (partial.childNodes.length > 1) {
                for(var i = 1; i < partial.childNodes.length; i+=2){
                   var modacc = partial.childNodes[i];
                  var modacc_ = {};
                   modacc_.name = modacc.getAttribute("name");
                   modacc_.caps = [];
                   if (modacc.childNodes.length > 1) {
                       for(var j = 1; j < modacc.childNodes.length; j+=2){
                           var cap = {};
                           cap.id = modacc.childNodes[j].getAttribute("id");
                           cap.usage =
                                modacc.childNodes[j].getAttribute("usage");
                           modacc_.caps.push(cap);
                       }
                       data.push(modacc_);
                   }
                }
            }
            _core.plilearn["partial"] = data;
        }

        var stat = xmldom.getElementsByTagName("stat");
        if(stat && stat.length){
            stat = stat[0];
            var data = [];
            if (stat.childNodes.length > 1) {
                for(var i = 1; i < stat.childNodes.length; i+=2){
                   var cap = stat.childNodes[i];
                   var cap_ = {};
                   cap_.name = cap.getAttribute("name");
                   PLI_MAJOR_STAT.forEach(function(stat){
                        PLI_MINOR_STAT.forEach(function(minor_stat){
                            cap_[stat+minor_stat.key_suffix] = cap.getAttribute(stat+minor_stat.key_suffix);
                        });
                   });
                   data.push(cap_);
                }
            }
            _core.plilearn["stat"] = data;
        }
    },
    checkSolverXML : function(){
        if(this.dbs == null){
            alert("this.dbs is null, please call loadInfoXml first");
            return null;
        }
        return !this.dbs[this.status.curDB].nosolver;
    },
    getHeapSnapUrl : function(){
        var index = arguments[0];
        var type = arguments[1];
        var url = "Snapshot";
        if(index > this.hpeak)
            index = index-1;
        url = url + index.toString();
        if(index <= this.hpeak)
            index = index-1;
        if(this.hsp[index].spName != null)
            url = url + "-" + this.hsp[index].spName + "-";
        url = url + type;
        return url;
    },
    getDynSnapUrl : function(){
        var index = arguments[0];
        var url = "DynamicSnapshot";
        if(index > this.dpeak)
            index = index-1;
        url = url + index.toString();
        if(index <= this.dpeak)
            index = index-1;
        if(this.sps[index].spName != null)
            url = url + "-" + this.sps[index].spName;
        return url;
    },
    genUrl : function(){
        if(this.dbs == null){
            alert("this.dbs is null, please call loadInfoXml first");
            return null;
        }
        var url = this.dir + "/" + this.dbs[this.status.curDB].report + "/";
        if(this.status.curType == 0){
            if(this.status.isTime == 1)
                url = url + "TimeEntry" + arguments[0].toString() + ".xml";
            else
                if(this.status.curSnap == 0 || this.status.curSnap == this.hpeak + 1){
                    url = url + "PeakMemoryEntry" + arguments[0].toString() + ".xml";
                }else{
                    url = url + this.getHeapSnapUrl(this.status.curSnap, "MemoryEntry")+ arguments[0].toString() + ".xml";
                }
        }else if(this.status.curType == 1){
            if(this.status.isTime == 1)
                url = url + "TimeModule" + arguments[0].toString() + ".xml";
            else
                if(this.status.curSnap == 0 || this.status.curSnap == this.hpeak + 1){
                    url = url + "PeakMemoryModule" + arguments[0].toString() + ".xml";
                }else{
                    url = url + this.getHeapSnapUrl(this.status.curSnap, "MemoryModule")+ arguments[0].toString() + ".xml";
                }
        }else if(this.status.curType == 2){
            if(this.status.isTime == 1)
                url = url + "TimeInstance" + arguments[0].toString() + ".xml";
            else
                if(this.status.curSnap == 0 || this.status.curSnap == this.hpeak + 1){
                    url = url + "PeakMemoryInstance" + arguments[0].toString() + ".xml";
                }else{
                    url = url + this.getHeapSnapUrl(this.status.curSnap, "MemoryInstance")+ arguments[0].toString() + ".xml";
                }
        }else if(this.status.curType == 3){
            if(this.status.isTime == 1)
                url = url + "TimeConstr" + arguments[0].toString() + ".xml";
            else
                if(this.status.curSnap == 0 || this.status.curSnap == this.hpeak + 1){
                    url = url + "PeakMemoryConstr" + arguments[0].toString() + ".xml";
                }else{
                    url = url + this.getHeapSnapUrl(this.status.curSnap, "MemoryConstr")+ arguments[0].toString() + ".xml";
                }
        }else if (this.status.curType == 4){
            url = url + "solver/profile.xml";
        }else if (this.status.curType == 5){
            if(this.status.isTime == 1)
                url = url + "TimeCoverage" + arguments[0].toString() + ".xml";
            else
                if(this.status.curSnap == 0 || this.status.curSnap == this.hpeak + 1){
                    url = url + "PeakMemoryCoverage" + arguments[0].toString() + ".xml";
                }else{
                    url = url + this.getHeapSnapUrl(this.status.curSnap, "MemoryCoverage")+ arguments[0].toString() + ".xml";
                }
        }else if(this.status.curType == 12){
            if(this.status.curSnap == 0 || this.status.curSnap == this.dpeak + 1){
                url = url + "DynamicPeak.xml";
            }else{
                url = url + this.getDynSnapUrl(this.status.curSnap)+ ".xml";
            }
        }else if(this.status.curType == 29){
            url = url + "EventCounter" + arguments[0].toString() + ".xml";
        }else if(this.status.curType > 13){
            if(this.status.isTime == 1)
                url = url + "Time" + this.dbs[this.status.curDB].slots[this.status.curType - 20].viewopt + arguments[0].toString() + ".xml";
            else
                if(this.status.curSnap == 0){
                    url = url + "PeakMemory" + this.dbs[this.status.curDB].slots[this.status.curType - 20].viewopt + arguments[0].toString() + ".xml";
                }else{
                    url = url + this.getHeapSnapUrl(this.status.curSnap, "Memory")+ this.dbs[this.status.curDB].slots[this.status.curType - 20].viewopt + arguments[0].toString() + ".xml";
                }
        }else{
            return null;
        }
        return url;
    }
}


/* this class is used to display data */
function ReportHTML(input){
    window.report = this;
    this.name = "ReportHTML";
    this.maincore = new ReportCore({"dir":input.dir});
    this.core = this.maincore;
    this.host = input.host;
    this.timelineFmt = 1;
    this.dbSelect = document.getElementById("dbselect");
    this.typeSelect = document.getElementById("typeselect");
    this.snapSelect = document.getElementById("snapselect");
}

ReportHTML.prototype = {

    /* These function is used generate control panel on the sidebar*/
    disableGo : function(){
        var go = document.getElementById("confirm");
        go.disabled = true;
    },
    enableGo : function(){
        var go = document.getElementById("confirm");
        go.disabled = false;
    },
    hideType : function(){
        var tr = document.getElementById("typetr");
        tr.style.display = "none";
    },
    hideRefType : function(){
        var tr = document.getElementById("rtypetr");
        tr.style.display = "none";
    },
    displayType : function(){
        var tr = document.getElementById("typetr");
        tr.style.display = "";
    },
    displayRefType : function(){
        var tr = document.getElementById("rtypetr");
        tr.style.display = "";
    },
    hideSnap : function(){
        var tr = document.getElementById("snaptr");
        tr.style.display = "none";
    },
    hideRefSnap : function(){
        var tr = document.getElementById("rsnaptr");
        tr.style.display = "none";
    },
    displaySnap : function(){
        var tr = document.getElementById("snaptr");
        tr.style.display = "";
    },
    displayRefSnap : function(){
        var tr = document.getElementById("rsnaptr");
        tr.style.display = "";
    },
    genDB : function(){
        var opts = document.getElementById("dbselect").options;
        opts.length = 0;
        if (report.core.dbs.length > 1) {
            opts[opts.length] = new Option("accumulative summary", "total");
        } else {
            opts[opts.length] = new Option("-----", "total");
        }
        if(report.mm == 1){
            opts[opts.length] = new Option("accumulative module", "mm");
            opts[opts.length] = new Option("accumulative instance", "mi");
            opts[opts.length] = new Option("accumulative constr", "mc");
            report.hideType();
            report.hideSnap();
            report.disableGo();
            report.maincore.loadTotalModule();
        }
        for(var i in this.maincore.dbs){
            opts[opts.length] = new Option(this.maincore.dbs[i].name, i);
        }
        report.changeDB();
    },
    genRefDB : function(){
        var dbtr = document.getElementById("rdbtr");
        dbtr.style.display = "";
        var opts = document.getElementById("rdbselect").options;
        opts.length = 0;
        if (this.refcore.dbs.lenght > 1) {
            opts[opts.length] = new Option("accumulative view", "total");
        } else {
            opts[opts.length] = new Option("-----", "total");
        }
        for(var i in this.refcore.dbs){
            opts[opts.length] = new Option(this.refcore.dbs[i].name, i);
        }
        report.changeRefDB();
    },
    changeDB : function(){
        report.maincore.loadTotalData();
        var opts = document.getElementById("dbselect").options;
        report.maincore.status.curDB = opts[opts.selectedIndex].value;
        report.maincore.reset();
        if(report.core.status.curDB == "total"){
            report.hideType();
            report.hideSnap();
            report.disableGo();
        }else{
            if(report.mm == 1 && report.core.status.curDB == "mm"){
                report.hideType();
                report.hideSnap();
                report.disableGo();
                report.maincore.loadTotalModule();
            }else if(report.mm == 1 && report.core.status.curDB == "mi"){
                report.hideType();
                report.hideSnap();
                report.disableGo();
                report.maincore.loadTotalInst();
            }else if(report.mm == 1 && report.core.status.curDB == "mc"){
                report.hideType();
                report.hideSnap();
                report.disableGo();
                var callback = report.maincore.loadTotalModuleCallback();
                report.maincore.loadTotalModuleCallback = null;
                report.maincore.loadTotalModule();
                report.maincore.loadTotalConstr();
                report.maincore.loadTotalModuleCallback = callback;
            }else{
                report.genType();
                report.enableGo();
            }
        }
        if(report.isref == 1){
            var go = document.getElementById("confirm");
            report.enableGo();
            go.onclick = report.genReport;
            if(report.maincore.status.curDB == "total" && report.refcore.status.curDB != "total"){
                report.core = report.refcore;
            }else if(report.maincore.status.curDB != "total" && report.refcore.status.curDB == "total"){
                report.core = report.maincore;
            }else if(report.maincore.status.curDB == "total" && report.refcore.status.curDB == "total"){
                go.onclick = report.genTotalDiff;
            }else{
                go.onclick = report.genDiff;
            }
        }
    },
    changeRefDB : function(){
        report.refcore.loadTotalData();
        report.refcore.reset();
        var opts = document.getElementById("rdbselect").options;
        report.refcore.status.curDB = opts[opts.selectedIndex].value;
        if(report.isref == 1){
            report.enableGo();
            var go = document.getElementById("confirm");
            go.onclick = report.genReport;
            if(report.maincore.status.curDB == "total" && report.refcore.status.curDB != "total"){
                report.core = report.refcore;
            }else if(report.maincore.status.curDB != "total" && report.refcore.status.curDB == "total"){
                report.core = report.maincore;
            }else if(report.maincore.status.curDB == "total" && report.refcore.status.curDB == "total"){
                go.onclick = report.genTotalDiff;
            }else{
                var go = document.getElementById("confirm");
                go.onclick = report.genDiff;
            }
            if(report.refcore.status.curDB == "total"){
                report.hideRefType();
                report.hideRefSnap();
            }else{
                if(report.maincore.status.curDB != "total"){
                    report.hideRefType();
                }else{
                    report.genRefType();
                }
            }
            report.genType();
        }
    },
    genType : function(){
        var db = report.maincore.dbs[report.maincore.status.curDB];
        var opts = document.getElementById("typeselect").options;
        opts.length = 0;
        if(report.isref == 1){
            if(report.maincore.status.curDB != "total" && report.refcore.status.curDB != "total"){
                if(db.time != "0"){
                    var time_args = db.time.split('+');
                    for (var i=0 ; i < time_args.length; i++){
                        if (time_args[i] == "summary") {
                            opts[opts.length] = new Option("Time Summary", 0);
                        }
                        else if (time_args[i] == "mod") {
                            opts[opts.length] = new Option("Time Module", 1);
                        }
                    }
                }
                if(db.memory != "0"){
                    var mem_args = db.memory.split('+');
                    for (var i=0 ; i < mem_args.length; i++){
                        if (mem_args[i] == "summary") {
                            opts[opts.length] = new Option("Memory Summary", 5);
                        }
                        else if (mem_args[i] == "mod") {
                            opts[opts.length] = new Option("Memory Module", 6);
                        }
                    }
                }
                report.core = report.maincore;
                report.displayType();
                report.changeType();
                return;
            }
        }
        if(db.time != "0"){
            var time_args = db.time.split('+');
            var has_time_solver = 0;
            var has_time_coverage = 0;
            var tccview = 0;
            var mccview = 0;
            var time_raw_view = 0;
            var mem_raw_view = 0;
            for (var i=0 ; i < time_args.length; i++){
                if (time_args[i] == "summary") {
                    opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + "Summary", 0);
                }
                else if (time_args[i] == "mod") {
                    opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + "Module", 1);
                }
                else if (time_args[i] == "inst") {
                    opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + "Instance", 2);
                }
                else if (time_args[i] == "constr") {
                    opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + "Construct", 3);
                }
                else if (time_args[i] == "solver") {
                    has_time_solver = 1;
                }
                else if (time_args[i] == "cover") {
                    has_time_coverage = 1;
                }
                else if (time_args[i] == "time_callercallee") {
                    tccview = 1;
                }
                else if (time_args[i] == "time_raw") {
                    time_raw_view = 1;
                }
            }
            if(db.slots && db.slots.length){
                for(var i=0; i<db.slots.length; i++){
                    if (db.slots[i].time == "1")  {
                        opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + db.slots[i].name, 20+2*i);
                    }
                }
            }
            if(has_time_solver){
                opts[opts.length] = new Option("Time Constraint Solver", 4);
            }
            if (has_time_coverage) {
                opts[opts.length] = new Option("Time Functional Coverage", 5);
            }
        }
        if(db.memory != "0"){
            var mem_args = db.memory.split('+');
            var has_mem_solver = 0;
            var has_mem_coverage = 0;
            for (var i=0 ; i < mem_args.length; i++){
                if (mem_args[i] == "summary") {
                    opts[opts.length] = new Option("Memory Summary", 6);
                }
                else if (mem_args[i] == "mod") {
                    opts[opts.length] = new Option("Memory Module", 7);
                }
                else if (mem_args[i] == "inst") {
                    opts[opts.length] = new Option("Memory Instance", 8);
                }
                else if (mem_args[i] == "constr") {
                    opts[opts.length] = new Option("Memory Construct", 9);
                }
                else if (mem_args[i] == "solver") {
                    has_mem_solver = 1;
                }
                else if (mem_args[i] == "cover") {
                    has_mem_coverage = 1;
                }
                else if (mem_args[i] == "mem_callercallee") {
                    mccview = 1;
                }
                else if (mem_args[i] == "mem_raw") {
                    mem_raw_view = 1;
                }
            }
            if(db.slots && db.slots.length){
                for(var i=0; i<db.slots.length; i++){
                    if (db.slots[i].mem == "1")  {
                        opts[opts.length] = new Option("Memory " + db.slots[i].name, 20+2*i+1);
                    }
                }
            }
            if(has_mem_solver){
                opts[opts.length] = new Option("Memory Constraint Solver", 10);
            }
            if(has_mem_coverage) {
                opts[opts.length] = new Option("Memory Functional Coverage", 11)
            }
        }
        if(db.dynamic == "1"){
            opts[opts.length] = new Option("Dynamic Memory", 12);
        }
        if(db.timeline == "1"){
            opts[opts.length] = new Option("Dynamic Timeline", 13);
        }
        if(mccview == 1) {
            opts[opts.length] = new Option("Memory Caller-Callee", 40);
        }
        if (tccview == 1) {
            opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + "Caller-Callee", 41);
        }
        if(db.plilearn == "1"){
            opts[opts.length] = new Option("PLI Debug Capability View", 42);
        }
        if(time_raw_view == 1) {
            opts[opts.length] = new Option((db.counter? "Counter ": "Time ") + "Raw", 43);
        }
        if(mem_raw_view == 1) {
            opts[opts.length] = new Option("Memory Raw", 44);
        }
        if(db.evntc != "0"){
            var evntc_args = db.evntc.split('+');
            for (var i=0 ; i < evntc_args.length; i++){
                if (evntc_args[i] == "evntc") {
                   opts[opts.length] = new Option("Event Counter", 39);
                }
            }
         }

        report.displayType();
        report.changeType();
    },
    genRefType : function(){
        var db = report.refcore.dbs[report.refcore.status.curDB];
        var opts = document.getElementById("rtypeselect").options;
        opts.length = 0;

        if(db.time != "0"){
            var time_args = db.time.split('+');
            for (var i=0 ; i < time_args.length; i++){
                if (time_args[i] == "summary") {
                    opts[opts.length] = new Option("Time Summary", 0);
                }
                else if (time_args[i] == "mod") {
                    opts[opts.length] = new Option("Time Module", 1);
                }
                else if (time_args[i] == "inst") {
                    opts[opts.length] = new Option("Time Instance", 2);
                }
                else if (time_args[i] == "constr") {
                    opts[opts.length] = new Option("Time Construct", 3);
                }
            }
            if(db.slots && db.slots.length){
                for(var i=0; i<db.slots.length; i++){
                    if (db.slots[i].time == "1")  {
                        opts[opts.length] = new Option("Time " + db.slots[i].name, 20+2*i);
                    }
                }
            }
        }
        if(db.memory != "0"){
            var mem_args = db.memory.split('+');
            for (var i=0 ; i < mem_args.length; i++){
                if (mem_args[i] == "summary") {
                    opts[opts.length] = new Option("Memory Summary", 6);
                }
                else if (mem_args[i] == "mod") {
                    opts[opts.length] = new Option("Memory Module", 7);
                }
                else if (mem_args[i] == "inst") {
                    opts[opts.length] = new Option("Memory Instance", 8);
                }
                else if (mem_args[i] == "constr") {
                    opts[opts.length] = new Option("Memory Construct", 9);
                }
            }
            if(db.slots && db.slots.length){
                for(var i=0; i<db.slots.length; i++){
                    if (db.slots[i].mem == "1")  {
                        opts[opts.length] = new Option("Memory " + db.slots[i].name, 20+2*i+1);
                    }
                }
            }
        }
        if(db.dynamic == "1"){
            opts[opts.length] = new Option("Dynamic Memory", 12);
        }
        if(db.timeline == "1"){
            opts[opts.length] = new Option("Dynamic Timeline", 13);
        }
        report.displayRefType();
        report.changeRefType();
    },
    changeType : function(){
        var opts = document.getElementById("typeselect").options;
        if(opts[opts.selectedIndex].value<6 || opts[opts.selectedIndex].value==42){
            report.maincore.status.curType = opts[opts.selectedIndex].value;
            report.maincore.status.isTime = 1;
        }else if(opts[opts.selectedIndex].value<12){
            report.maincore.status.curType = opts[opts.selectedIndex].value - 6;
            report.maincore.status.isTime = 0;
        }else if(opts[opts.selectedIndex].value>19 && opts[opts.selectedIndex].value!=40 && opts[opts.selectedIndex].value!=41 && opts[opts.selectedIndex].value!=43 &&  opts[opts.selectedIndex].value!=44){
            if(opts[opts.selectedIndex].value % 2){
                report.maincore.status.isTime = 0;
                report.maincore.status.curType = (opts[opts.selectedIndex].value - 21)/2 + 20;
            }else{
                report.maincore.status.isTime = 1;
                report.maincore.status.curType = (opts[opts.selectedIndex].value - 20)/2 + 20;
            }
        }else{
            report.maincore.status.curType = opts[opts.selectedIndex].value;
            report.maincore.status.isTime = 0;
        }
        if(report.maincore.status.isTime == 1 || report.maincore.status.curType == 13){
            report.hideSnap();
        }else{
            report.maincore.loadClocks();
            if(report.maincore.status.curType == 12){
                if(report.maincore.dbs[report.maincore.status.curDB].dsp<2)
                    report.hideSnap();
                else
                    report.genSnap();
            }else{
                if(report.maincore.dbs[report.maincore.status.curDB].msp<2)
                    report.hideSnap();
                else
                    report.genSnap();
            }
        }
    },
    changeRefType : function(){
        var opts = document.getElementById("rtypeselect").options;
        if(opts[opts.selectedIndex].value<6){
            report.refcore.status.curType = opts[opts.selectedIndex].value;
            report.refcore.status.isTime = 1;
        }else if(opts[opts.selectedIndex].value<12){
            report.refcore.status.curType = opts[opts.selectedIndex].value - 6;
            report.refcore.status.isTime = 0;
        }else if(opts[opts.selectedIndex].value>19){
            if(opts[opts.selectedIndex].value % 2){
                report.refcore.status.isTime = 0;
                report.refcore.status.curType = (opts[opts.selectedIndex].value - 21)/2 + 20;
            }else{
                report.refcore.status.isTime = 1;
                report.refcore.status.curType = (opts[opts.selectedIndex].value - 20)/2 + 20;
            }
        }else{
            report.refcore.status.curType = opts[opts.selectedIndex].value;
            report.refcore.status.isTime = 0;
        }
        if(report.refcore.status.isTime == 1 || report.maincore.status.curType == 13){
            report.hideRefSnap();
        }else{
            report.refcore.loadClocks();
            if(report.refcore.status.curType == 12){
                if(report.refcore.dbs[report.refcore.status.curDB].dsp<2)
                    report.hideRefSnap();
                else
                    report.genRefSnap();
            }else{
                if(report.refcore.dbs[report.refcore.status.curDB].msp<2)
                    report.hideRefSnap();
                else
                    report.genRefSnap();
            }
        }
    },
    genSnap : function(){
        var opts = document.getElementById("snapselect").options;
        opts.length = 0;
        var sps = 0;
        if(report.maincore.status.curType < 12 || report.maincore.status.curType > 13){
            opts[opts.length] = new Option("#" + report.maincore.hpeak.toString() + " Peak (Simulation time:" + report.maincore.hsp[report.maincore.hpeak].cycle + ")", 0);
            sps = report.maincore.dbs[report.maincore.status.curDB].msp;
            for(var i = 0; i < sps; i++){
                if(report.maincore.hpeak == i)
                    opts[opts.length] =  new Option("#"+i.toString()+" Peak (Simulation time:"+report.maincore.hsp[i].cycle+")", i+1);
                else if(!report.maincore.hsp[i].spName)
                    opts[opts.length] =  new Option("#"+i.toString()+ " (Simulation time:"+report.maincore.hsp[i].cycle+")", i+1);
                else
                    opts[opts.length] =  new Option("#"+i.toString() +"(" +report.maincore.hsp[i].spName +")" + " (Simulation time:"+report.maincore.hsp[i].cycle+")", i+1);
            }
        }else{
            opts[opts.length] = new Option("#" + report.maincore.dpeak.toString() + " Peak (Simulation time:" + report.maincore.sps[report.maincore.dpeak].cycle + ")", 0);
            sps = report.maincore.dbs[report.maincore.status.curDB].dsp;
            for(var i = 0; i < sps; i++){
                if(report.maincore.dpeak == i)
                    opts[opts.length] =  new Option("#"+i.toString()+" Peak (Simulation time:"+report.maincore.sps[i].cycle+")", i+1);
                else if(!report.maincore.sps[i].spName)
                    opts[opts.length] =  new Option("#"+i.toString()+ " (Simulation time:"+report.maincore.sps[i].cycle+")", i+1);
                else
                    opts[opts.length] =  new Option("#"+i.toString() +"(" +report.maincore.sps[i].spName +")" + " (Simulation time:"+report.maincore.sps[i].cycle+")", i+1);
            }
        }
        report.displaySnap();
        report.changeSnap();
    },
    genRefSnap : function(){
        var opts = document.getElementById("rsnapselect").options;
        opts.length = 0;
        var sps = 0;
        if(report.refcore.status.curType < 12 || report.refcore.status.curType > 13){
            opts[opts.length] = new Option("#" + report.refcore.hpeak.toString() + " Peak (Simulation time:" + report.refcore.hsp[report.refcore.hpeak].cycle + ")", 0);
            sps = report.refcore.dbs[report.refcore.status.curDB].msp;
            for(var i = 0; i < sps; i++){
                if(report.refcore.hpeak == i)
                    opts[opts.length] =  new Option("#"+i.toString()+" Peak (Simulation time:"+report.refcore.hsp[i].cycle+")", i+1);
                else if(!report.refcore.hsp[i].spName)
                    opts[opts.length] =  new Option("#"+i.toString()+ " (Simulation time:"+report.refcore.hsp[i].cycle+")", i+1);
                else
                    opts[opts.length] =  new Option("#"+i.toString() +"(" +report.refcore.hsp[i].spName +")" + " (Simulation time:"+report.refcore.hsp[i].cycle+")", i+1);
            }
        }else{
            opts[opts.length] = new Option("#" + report.refcore.dpeak.toString() + " Peak (Simulation time:" + report.refcore.sps[report.refcore.dpeak].cycle + ")", 0);
            sps = report.refcore.dbs[report.refcore.status.curDB].dsp;
            for(var i = 0; i < sps; i++){
                if(report.refcore.dpeak == i)
                    opts[opts.length] =  new Option("#"+i.toString()+" Peak (Simulation time:"+report.refcore.sps[i].cycle+")", i+1);
                else if(!report.refcore.sps[i].spName)
                    opts[opts.length] =  new Option("#"+i.toString()+ " (Simulation time:"+report.refcore.sps[i].cycle+")", i+1);
                else
                    opts[opts.length] =  new Option("#"+i.toString() +"(" +report.refcore.sps[i].spName +")" + " (Simulation time:"+report.refcore.sps[i].cycle+")", i+1);
            }
        }
        report.displayRefSnap();
        report.changeRefSnap();
    },
    changeSnap : function(){
        var opts = document.getElementById("snapselect").options;
        report.maincore.status.curSnap = opts[opts.selectedIndex].value;
    },
    changeRefSnap : function(){
        var opts = document.getElementById("rsnapselect").options;
        report.refcore.status.curSnap = opts[opts.selectedIndex].value;
    },

    clearDiv : function(){
        var main = document.getElementById("simp_main");
        while(main.firstChild){
            main.removeChild(main.firstChild);
        }
        var board = document.getElementById("simp_board");
        while(board.firstChild){
            board.removeChild(board.firstChild);
        }
    },

    loadInfoXmlCallback : function(){
        report.genDB();
    },
    loadRefInfoCallback : function(){
        report.genRefDB();
    },

    genTotalDiff : function(){
        var simpmain = document.getElementById("simp_main");
        var timediv = document.createElement("div");
        var memorydiv = document.createElement("div");
        var dynamicdiv = document.createElement("div");
        report.clearDiv();
        timediv.id = "timediv";
        memorydiv.id = "memorydiv";
        dynamicdiv.id = "dynamicdiv";
        simpmain.appendChild(timediv);
        simpmain.appendChild(memorydiv);
        simpmain.appendChild(dynamicdiv);
        var tdata = [];
        var ttotal = {};
        var time = {};
        if(report.maincore.totalTime != null){
            ttotal.main = 0;
            for(var i in report.maincore.totalTime){
                ttotal.main += report.maincore.totalTime[i];
            }
            for(var i in report.maincore.totalTime){
                var timeObj = {};
                timeObj.main = report.maincore.totalTime[i];
                timeObj.ref = 0;
                time[i] = timeObj;
            }
        }
        if(report.refcore.totalTime != null){
            ttotal.ref = 0;
            for(var i in report.refcore.totalTime){
                ttotal.ref += report.refcore.totalTime[i];
            }
            for(var i in report.refcore.totalTime){
                if(time[i] != undefined)
                    var timeObj = time[i]
                else{
                    var timeObj = {};
                    timeObj.main = 0;
                }
                timeObj.ref = report.refcore.totalTime[i];
                time[i] = timeObj;
            }
        }
        for(var i in time){
            if(time[i].main > time[i].ref)
                var gap = {"value":formatTime(time[i].main-time[i].ref), "className":"simp_table_red"};
            else
                var gap = {"value":formatTime(time[i].main-time[i].ref), "className":"simp_table_green"};
            tdata.push([i, formatTime(time[i].main), formatTime(time[i].ref), gap]);
        }
        var ttable = new RptTable({"data":tdata, "title":["Component", "Time", "Reference", "Gap"], "total":["total", formatTime(ttotal.main), formatTime(ttotal.ref), formatTime(ttotal.main-ttotal.ref)], "head": "Time Summary", "select":"timediv"});
        ttable.nofoot = true;
        ttable.genTable();
        var mdata = [];
        var mtotal = {};
        var memory = {};
        if(report.maincore.totalMemory != null){
            mtotal.main = 0;
            for(var i in report.maincore.totalMemory){
                mtotal.main += report.maincore.totalMemory[i];
            }
            for(var i in report.maincore.totalMemory){
                var memoryObj = {};
                memoryObj.main = report.maincore.totalMemory[i];
                memoryObj.ref = 0;
                memory[i] = memoryObj;
            }
        }
        if(report.refcore.totalMemory != null){
            mtotal.ref = 0;
            for(var i in report.refcore.totalMemory){
                mtotal.ref += report.refcore.totalMemory[i];
            }
            for(var i in report.refcore.totalMemory){
                if(memory[i] != undefined)
                    var memoryObj = memory[i]
                else{
                    var memoryObj = {};
                    memoryObj.main = 0;
                }
                memoryObj.ref = report.refcore.totalMemory[i];
                memory[i] = memoryObj;
            }
        }
        for(var i in memory){
            if(memory[i].main > memory[i].ref)
                var gap = {"value":formatMemory(memory[i].main-memory[i].ref), "className":"simp_table_red"};
            else
                var gap = {"value":formatMemory(memory[i].main-memory[i].ref), "className":"simp_table_green"};
            mdata.push([i, formatMemory(memory[i].main), formatMemory(memory[i].ref), gap]);
        }
        var mtable = new RptTable({"data":mdata, "title":["Component", "Memory", "Reference", "Gap"], "total":["total", formatMemory(mtotal.main), formatMemory(mtotal.ref), formatMemory(mtotal.main-mtotal.ref)], "head": "Memory Summary", "select":"memorydiv"});
        mtable.nofoot = true;
        mtable.genTable();
        var ddata = [];
        var dtotal = {};
        var dynamic = {};
        if(report.maincore.totalDynamic != null){
            dtotal.main = 0;
            for(var i in report.maincore.totalDynamic){
                dtotal.main += report.maincore.totalDynamic[i];
            }
            for(var i in report.maincore.totalDynamic){
                var dynamicObj = {};
                dynamicObj.main = report.maincore.totalDynamic[i];
                dynamicObj.ref = 0;
                dynamic[i] = dynamicObj;
            }
        }
        if(report.refcore.totalDynamic != null){
            dtotal.ref = 0;
            for(var i in report.refcore.totalDynamic){
                dtotal.ref += report.refcore.totalDynamic[i];
            }
            for(var i in report.refcore.totalDynamic){
                if(dynamic[i] != undefined)
                    var dynamicObj = dynamic[i]
                else{
                    var dynamicObj = {};
                    dynamicObj.main = 0;
                }
                dynamicObj.ref = report.refcore.totalDynamic[i];
                dynamic[i] = dynamicObj;
            }
        }
        for(var i in dynamic){
            if(dynamic[i].main > dynamic[i].ref)
                var gap = {"value":formatMemory(dynamic[i].main-dynamic[i].ref), "className":"simp_table_red"};
            else
                var gap = {"value":formatMemory(dynamic[i].main-dynamic[i].ref), "className":"simp_table_green"};
            ddata.push([i, formatMemory(dynamic[i].main), formatMemory(dynamic[i].ref), gap]);
        }
        var dtable = new RptTable({"data":ddata, "title":["Component", "Dynamic", "Reference", "Gap"], "total":["total", formatMemory(dtotal.main), formatMemory(dtotal.ref), formatMemory(dtotal.main-dtotal.ref)], "head": "Dynamic Summary", "select":"dynamicdiv"});
        dtable.nofoot = true;
        dtable.genTable();
    },

    loadTotalModuleCallback : function(){
        var simpmain = document.getElementById("simp_main");
        var timediv = document.createElement("div");
        var memorydiv = document.createElement("div");
        report.clearDiv();
        timediv.id = "time_div";
        memorydiv.id = "mem_div";
        simpmain.appendChild(timediv);
        simpmain.appendChild(memorydiv);
        var isTime = (this.totalModuleTime[0]==undefined)?0:1;
        var isMem = (this.totalModuleMem[0]==undefined)?0:1;
        if (!isTime && !isMem) {
            var h1 = document.createElement("h1");
            h1.innerHTML = "no time profile data available";
            simpmain.appendChild(h1);
            return;
        }
        if(isTime){
            var data = [];
            var title = ["Name", "Time", "Percentage"];
            var dtotal = (this.totalmtime==0)?1:this.totalmtime;
            var total = ["total", formatTime(this.totalModuleTimeValue), (100.0*this.totalModuleTimeValue/dtotal).toFixed(1).toString()+"%"];
            for(var i = 0; i < this.totalModuleTime.length; i++){
                var mod = this.totalModuleTime[i];
                var item = [];
                item.push({"value":mod.name, "onclick":report.displaySummaryModuleTime, "aid":mod});
                item.push(formatTime(mod.time));
                item.push((100.0*mod.time/dtotal).toFixed(1).toString()+"%");
                data.push(item);
            }
            var table = new RptTable({"data":data, "title":title, "head":"Module Time Summary", "total":total, "select":"time_div"});
            table.genTable();
        }
        if(isMem){
            var data = [];
            var title = ["Name", "Memory", "Percentage"];
            var dtotal = (this.totalmmem==0)?1:this.totalmmem;
            var total = ["total", formatMemory(this.totalModuleMemValue), (100.0*this.totalModuleMemValue/dtotal).toFixed(1).toString()+"%"];
            for(var i = 0; i < this.totalModuleMem.length; i++){
                var mod = this.totalModuleMem[i];
                var item = [];
                item.push({"value":mod.name, "onclick":report.displaySummaryModuleMem, "aid":mod});
                item.push(formatMemory(mod.mem));
                item.push((100.0*mod.mem/dtotal).toFixed(1).toString()+"%");
                data.push(item);
            }
            var table = new RptTable({"data":data, "title":title, "head":"Module Memory Summary", "total":total, "select":"mem_div"});
            table.genTable();
        }
    },

    loadTotalConstrCallback : function(){
        var simpmain = document.getElementById("simp_main");
        var timediv = document.createElement("div");
        var memorydiv = document.createElement("div");
        report.clearDiv();
        timediv.id = "time_div";
        memorydiv.id = "mem_div";
        simpmain.appendChild(timediv);
        simpmain.appendChild(memorydiv);
        var isTime = (this.totalConstrTime[0]==undefined)?0:1;
        var isMem = (this.totalConstrMem[0]==undefined)?0:1;
        if(isTime){
            var data = [];
            var title = ["Name", "Time", "Percentage"];
            var dtotal = (this.totalctime==0)?1:this.totalmtime;
            var total = ["total", formatTime(this.totalConstrTimeValue), (100.0*this.totalConstrTimeValue/dtotal).toFixed(1).toString()+"%"];
            for(var i = 0; i < this.totalConstrTime.length; i++){
                var constr = this.totalConstrTime[i];
                var item = [];
                if (constr.isType)
                    item.push(constr.name);
                else
                    item.push({"value":constr.name, "indent":1, "onclick":report.displaySummaryConstrTime, "aid":i});
                item.push(formatTime(constr.time));
                item.push((100.0*constr.time/dtotal).toFixed(1).toString()+"%");
                data.push(item);
            }
            var table = new RptTable({"data":data, "title":title, "head":"Constr Time Summary", "total":total, "select":"time_div"});
            table.genTable();
        }
        if(isMem){
            var data = [];
            var title = ["Name", "Memory", "Percentage"];
            var dtotal = (this.totalcmem==0)?1:this.totalmmem;
            var total = ["total", formatMemory(this.totalConstrMemValue), (100.0*this.totalConstrMemValue/dtotal).toFixed(1).toString()+"%"];
            for(var i = 0; i < this.totalConstrMem.length; i++){
                var constr = this.totalConstrMem[i];
                var item = [];
                if (constr.isType)
                    item.push(constr.name);
                else
                    item.push({"value":constr.name, "indent":1, "onclick":report.displaySummaryConstrMemory, "aid":i});
                item.push(formatMemory(constr.mem));
                item.push((100.0*constr.mem/dtotal).toFixed(1).toString()+"%");
                data.push(item);
            }
            var table = new RptTable({"data":data, "title":title, "head":"Constr Memory Summary", "total":total, "select":"mem_div"});
            table.genTable();
        }
    },

    loadTotalInstCallback : function() {
        var simpmain = document.getElementById("simp_main");
        var timediv = document.createElement("div");
        var memorydiv = document.createElement("div");
        report.clearDiv();
        timediv.id = "time_div";
        memorydiv.id = "mem_div";
        simpmain.appendChild(timediv);
        simpmain.appendChild(memorydiv);
        var isTime = (this.totalInstTime[0]==undefined)?0:1;
        var isMem = (this.totalInstMem[0]==undefined)?0:1;
        if(isTime){
            var data = [];
            var title = ["Name", "Inclusive Time", "Percentage", "Exclusive Time", "Percentage"];
            var dtotal = (this.totalmtime==0)?1:this.totalmtime;
            var total = ["total", "&nbsp", "&nbsp", formatTime(this.totalInstTimeValue), (100.0*this.totalInstTimeValue/dtotal).toFixed(1).toString()+"%"];
            for(var i = 0; i < this.totalInstTime.length; i++){
                var inst = this.totalInstTime[i];
                var item = [];
                item.push({"value":inst.name, "onclick":report.displaySummaryInstanceTime, "aid":i});
                item.push(formatTime(inst.time));
                item.push((100.0*inst.time/dtotal).toFixed(1).toString()+"%");
                item.push(formatTime(inst.etime));
                item.push((100.0*inst.etime/dtotal).toFixed(1).toString()+"%");
                data.push(item);
            }
            var table = new RptTable({"data":data, "title":title, "head":"Instance Time Summary", "total":total, "select":"time_div"});
            table.genTable();
        }
        if(isMem){
            var data = [];
            var title = ["Name", "Inclusive Memory", "Percentage", "Exclusive Memory", "Percentage"];
            var dtotal = (this.totalmmem==0)?1:this.totalmmem;
            var total = ["total", "&nbsp", "&nbsp", formatMemory(this.totalInstMemValue), (100*this.totalInstMemValue/dtotal).toFixed(1).toString()+"%"];
            for(var i = 0; i < this.totalInstMem.length; i++){
                var inst = this.totalInstMem[i];
                var item = [];
                item.push({"value":inst.name, "onclick":report.displaySummaryInstanceMem, "aid":i});
                item.push(formatMemory(inst.mem));
                item.push((100.0*inst.mem/dtotal).toFixed(1).toString()+"%");
                item.push(formatMemory(inst.emem));
                item.push((100.0*inst.emem/dtotal).toFixed(1).toString()+"%");
                data.push(item);
            }
            var table = new RptTable({"data":data, "title":title, "head":"Instance Memory Summary", "total":total, "select":"mem_div"});
            table.genTable();
        }
    },

    loadTotalDataCallback : function(){
        var simpmain = document.getElementById("simp_main");
        var timediv = document.createElement("div");
        var memorydiv = document.createElement("div");
        var dynamicdiv = document.createElement("div");
        report.clearDiv();
        timediv.id = "timediv";
        memorydiv.id = "memorydiv";
        dynamicdiv.id = "dynamicdiv";
        simpmain.appendChild(timediv);
        simpmain.appendChild(memorydiv);
        simpmain.appendChild(dynamicdiv);
        var tdata = [];
        var total = 0;
        if(this.totalTime != null){
            for(var i in this.totalTime){
                total += this.totalTime[i];
            }
            for(var i in this.totalTime){
                if(this.totalTime[i] > 1000000){
                    tdata.push([i, (this.totalTime[i]/1000000).toFixed(1).toString() + " s", (this.totalTime[i]/total*100).toFixed(2).toString()+"%"]);
                }else if(this.totalTime[i] > 1000){
                    tdata.push([i, (this.totalTime[i]/1000).toFixed(1).toString() + " ms", (this.totalTime[i]/total*100).toFixed(2).toString()+"%"]);
                }else{
                    tdata.push([i, this.totalTime[i].toFixed(1).toString() + " us", (this.totalTime[i]/total*100).toFixed(2).toString()+"%"]);
                }
            }
        }
        if(total != 0){
            if (total > 1000000) {
                var ttable = new RptTable({"data":tdata, "title":["Component", "Time", "Percentage"], "total":["total", (total/1000000).toFixed(1).toString() + " s", "100%"], "head": "Time Summary", "select":"timediv"});
            } else if (total > 1000) {
                var ttable = new RptTable({"data":tdata, "title":["Component", "Time", "Percentage"], "total":["total", (total/1000).toFixed(1).toString() + " ms", "100%"], "head": "Time Summary", "select":"timediv"});
            } else {
                var ttable = new RptTable({"data":tdata, "title":["Component", "Time", "Percentage"], "total":["total", total.toFixed(1).toString() + " us", "100%"], "head": "Time Summary", "select":"timediv"});
            }
            ttable.nofoot = true;
            ttable.genTable();
        }
        var mdata = [];
        total = 0;
        if(this.totalMemory != null){
            for(var i in this.totalMemory){
                total += this.totalMemory[i];
            }
            for(var i in this.totalMemory){
                mdata.push([i, formatData(this.totalMemory[i]), (this.totalMemory[i]/total*100).toFixed(2).toString()+"%"]);
            }
        }
        if(total != 0){
            var mtable = new RptTable({"data":mdata, "title":["Component", "Size", "Percentage"], "total":["total", formatData(total), "100%"], "head": "Memory Summary", "select":"memorydiv"});
            mtable.nofoot = true;
            mtable.genTable();
        }
        var ddata = [];
        total = 0;
        if(this.totalDynamic != null){
            for(var i in this.totalDynamic){
                total += this.totalDynamic[i];
            }
            for(var i in this.totalDynamic){
                ddata.push([i, formatData(this.totalDynamic[i]), (this.totalDynamic[i]/total*100).toFixed(2).toString()+"%"]);
            }
        }
        if(total != 0){
            var dtable = new RptTable({"data":ddata, "title":["Dynamic Object", "Size", "Percentage"], "total":["total", formatData(total), "100%"], "head": "dynamic Summary", "select":"dynamicdiv"});
            dtable.nofoot = true;
            dtable.genTable();
        }
    },

    genEntryDetail : function(){
        var data = arguments[0];
        var entry = arguments[1];
        var indent = arguments[2];
        data.push([{"value":entry.name, "indent": indent}, formatData(entry.value, report.core.status.isTime), (entry.value*100/report.core.curTotal).toFixed(2).toString()+" %"])
        if(entry.child && entry.child.length != 0){
            for(var i = 0; i < entry.child.length; i++){
                report.genEntryDetail(data, report.core.entries[entry.child[i]], indent+1);
                report.core.entries[entry.child[i]].root = 0;
            }
        }
    },

    loadTimeOrMemoryEntryCallback : function(){
        var isTime = report.core.status.isTime;
        var main = document.getElementById("simp_main1");
        var h1 = document.createElement("h1");
        h1.innerHTML = "no profile data available";
        var data = [];
        if(!report.core.status.isTime){
            var cycle = 0;
            if(report.core.status.curSnap == 0)
                cycle = report.core.hsp[report.core.hpeak].cycle;
            else
                cycle = report.core.hsp[report.core.status.curSnap - 1].cycle;
        }
        if(report.core.entries == null){
            main.appendChild(h1);
        }else{
            for(var i in report.core.entries){
                if(report.core.entries[i].root == 0)
                    continue;
                report.genEntryDetail(data, report.core.entries[i], 0);
            }
            var title;
            var head;
            if(isTime){
                var isCounter = report.core.dbs[report.maincore.status.curDB].counter;
                title = ["Component", isCounter? "Count": "Time", "Percentage"];
                head = (isCounter? "Counter ": "Time ") + "Summary View"; 
            }else{
                title = ["Component", "Size", "Percentage"];
                head = "Memory Summary View";
                head = head + " (Simulation time:" + cycle + ")";
            }
            var table = new RptTable({"data":data, "title":title, "total":["total", formatData(report.core.curTotal, isTime), "100%"], "head":head, "select":"simp_main1"});
            table.nofoot = true;
            table.genTable();
        }
        report.displayCurDBInfo();
    },

    loadDynamicCallback : function(){
        var head = "Dynamic Memory View";
        var title = ["Dynamic Object", "Instance Number", "Memory", "Percentage", "Instance Number (Total)"];
        var data = [];
        var cycle = 0;
        if(report.core.status.curSnap == 0)
            cycle = report.core.sps[report.core.dpeak].cycle;
        else
            cycle = report.core.sps[report.core.status.curSnap - 1].cycle;
        head = head + " (Simulation time: " + cycle + ")";
        for(var i = 0; i < report.core.dynList.length; i++){            
            var obj = report.core.dynList[i];
            if(obj.isgroup)
                data.push({"value":[obj.name, obj.insts, formatData(obj.value), (obj.value/report.core.curTotal*100).toFixed(2).toString()+" %", obj.totalinsts], "child":"tobeload", "aid":i, "onclick":report.genDynObjDetail});
            else
                data.push({"value":[obj.name, obj.insts, formatData(obj.value), (obj.value/report.core.curTotal*100).toFixed(2).toString()+" %", obj.totalinsts], "child":"tobeload", "aid":{"objid":i}, "onclick":report.genDynStackDetail});
        }
        var table = new RptTable({"data":data, "title":title, "total":["", "", formatData(report.core.curTotal), "100%", ""], "head":head, "select":"simp_main1"});
        table.genTable();
    },

    genDynStackDetail : function(){
        var dynobj = {};
        if(this.aid.isgroup) {
           var dynobjgroup = report.core.dynList[this.aid.groupid];
           dynobj = dynobjgroup.dynobj[this.aid.objid];
        }else{
           dynobj = report.core.dynList[this.aid.objid];
        }
        if(dynobj.stacks && dynobj.stacks.length){
            var children = [];
            for(var i = 0; i < dynobj.stacks.length; i++){
                var stack = dynobj.stacks[i];
                var child = {"value":[stack.name, stack.insts, formatData(stack.value), (stack.value/report.core.curTotal*100).toFixed(2).toString()+" %", stack.totalinsts], "aid":{"sid":stack.id, "name":stack.name, "fileid":stack.fileid, "lineno": stack.lineno}, "onclick":report.displayStackInfo, "child":"tobeload"}
                children.push(child);
            }
            this.data.child = children;
        }else{
            this.data.child = null;
        }
        this.data.onclick = report.hideDynStackDetail;
        this.table.genTable();
    },

    hideDynStackDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genDynStackDetail;
        this.table.genTable();
    },

    genDynObjDetail : function(){
        var dynobjgroup = report.core.dynList[this.aid];
        if(dynobjgroup.dynobj && dynobjgroup.dynobj.length){
            var children = [];
            for(var i = 0; i < dynobjgroup.dynobj.length; i++){
                var dynobj = dynobjgroup.dynobj[i];
                var child = {"value":[dynobj.name, dynobj.insts, formatData(dynobj.value), (dynobj.value/report.core.curTotal*100).toFixed(2).toString()+" %", dynobj.totalinsts], "aid":{"groupid":this.aid, "objid":i, "isgroup": 1}, "onclick":report.genDynStackDetail, "child":"tobeload"}
                children.push(child);
            }
            this.data.child = children;
        }else{
            this.data.child = null;
        }
        this.data.onclick = report.hideDynObjDetail;
        this.table.genTable();
    },

    hideDynObjDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genDynObjDetail;
        this.table.genTable();
    },

    displayStackInfo : function(){
        var data = [];
        var i = 1;
        var id = this.aid.sid;
        var name = this.aid.name;
        var fileid = this.aid.fileid;
        var lineno = this.aid.lineno;
        var src;
        if(fileid==0)
            src = report.core.files[fileid];
        else
            src = report.core.files[fileid]+":"+lineno;
        data.push(["#0", name, src]);
        if(id!="0"){
            pid = report.core.stacks[id].pid;
            while(pid!="0"){
                data.push(["#"+i.toString(), report.core.stacks[pid].name, {"value":report.core.stacks[id].source, "src":2}]);
                i++;
                id = pid;
                pid = report.core.stacks[pid].pid;
            }
            data.push(["#"+i.toString(), report.core.stacks[id].cname, {"value":report.core.stacks[id].source, "src":2}]);
        }
        var table = new RptTable({"title":["&nbsp","",""], "total":["&nbsp", "&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Stack Information"});
        table.nofoot = true;
        table.genTable();
    },


    displayCurDBInfo : function(){
        var db = report.core.dbs[report.core.status.curDB];
        var data = [];
        if (db.snapshot != "0") {
            data.push(["Heap Snapshot Count", db.msp]);
            data.push(["Dynamic Snapshot Count", db.dsp]);
        }
        data.push(["Build Date", db.builddate]);
        data.push(["Compile Version", db.cversion]);
        data.push(["Runtime Version", db.rversion]);
        data.push(["Create Date", db.createdata]);
        data.push(["Profile Start", db.start]);
        data.push(["Profile Stop", db.stop]);
        data.push(["User", db.user]);
        data.push(["Host", db.host]);
        if (db.time != "0") {
            data.push(["Cpu Time", db.cputime.toString() + " s"]);
        }
        if (db.memory != "0") {
            data.push(["Mem Size", formatData(db.memsize, 0)]);
        }
        data.push(["Report Command", report.core.cmd]);
        for(var i = 0; i < report.core.comp_cmd.length; i++){
            data.push(["Compile Command", report.core.comp_cmd[i]]);
        }
        data.push(["Simulation Command", report.core.simv_cmd]);
        if (db.counter) {
            if (db.clock) {
                data.push(["Counter Source", "clock signal value change"]);
            }
            else {
                data.push(["Counter Source", "sampling times"]);
            }
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Current Database Information"});
        table.nofoot = true;
        table.genTable();
    },

    genDiffEntryChild : function(){
        var entry = arguments[0];
        var core = arguments[1];
        if(entry.child && entry.child.length){
            for(var i = 0; i < entry.child.length; i++){
                report.genDiffEntryChild(entry.child[i]);
                core.entries[entry.child[i]].root = 0;
            }
        }
    },

    genDiff : function(){
        if(report.core.files == null){
            report.core.loadFiles();
        }
        if(report.refcore.files == null){
            report.refcore.loadFiles();
        }
        report.refcore.status.curSp = 0;
        report.refcore.status.curType = report.core.status.curType;
        report.refcore.status.isTime = report.core.status.isTime;
        if(report.core.status.curType != 1){
            report.core.loadTimeOrMemoryEntry();
            report.refcore.loadTimeOrMemoryEntry();
            var isTime = report.core.status.isTime;
            report.clearDiv();
            var main = document.getElementById("simp_main");
            var h1 = document.createElement("h1");
            h1.innerHTML = "no profile data available";
            var data = [];
            for(var i in report.core.entries){
                if(report.core.entries[i].root == 0)
                    continue;
                report.genDiffEntryChild(report.core.entries[i], report.core);
            }
            for(var i in report.refcore.entries){
                if(report.refcore.entries[i].root == 0)
                    continue;
                report.genDiffEntryChild(report.refcore.entries[i], report.refcore);
            }
            if(report.core.entries == null){
                main.appendChild(h1);
            }else{
                var tmp = {};
                for(var i in report.refcore.entries){
                    if(report.refcore.entries[i].root == 0)
                        continue;
                    tmp[i] = report.refcore.entries[i];
                }
                for(var i in report.core.entries){
                    if(report.core.entries[i].root == 0)
                        continue;
                    if(report.refcore.entries[i] != undefined){
                        var gap = formatGap(report.core.entries[i].value, report.refcore.entries[i].value, isTime);
                        data.push([i, formatData(report.core.entries[i].value, isTime), formatData(report.refcore.entries[i].value, isTime, report.refcore), gap]);
                        tmp[i] = undefined;
                    }else{
                        data.push([i, formatData(report.core.entries[i].value, isTime), "--", {"value":formatData(report.core.entries[i].value, isTime), "className":"simp_right simp_table_red"}]);
                    }
                }
                for(var i in tmp){
                    if(tmp[i] != undefined)
                        data.push([i, "--", formatData(report.refcore.entries[i].value, isTime), {"value":"-"+formatData(report.refcore.entries[i].value, isTime, report.refcore), "className":"simp_right simp_table_green"}]);
                }
                var title = ["Component", "Size", "Reference", "Gap"];
                var head = "Memory Summary View";
                if(isTime){
                    title = ["Component", "Time", "Reference", "Gap"];
                    head = "Time Summary View";
                }
                var table = new RptTable({"data":data, "title":title, "total":["total", formatData(report.core.curTotal, isTime), formatData(report.refcore.curTotal, isTime, report.refcore), ""], "head":head, "select":"simp_main"});
                table.nofoot = true;
                table.genTable();
            }
        }else{
            report.core.loadTimeOrMemoryModule();
            report.refcore.loadTimeOrMemoryModule();
            if(report.core.status.isTime){
                var head = "Time Module View";
                var title = ["Module", "Time", "Reference", "Gap"];
            }else{
                var head = "Memory Module View";
                var title = ["Module", "Size", "Reference", "Gap"];
            }
            var isTime = report.core.status.isTime;
            var data = [];
            var modIt = report.core.firstMod;
            while(modIt){
                var id = modIt.id;
                if(report.core.design.mods[id] == undefined){
                    report.core.loadModule(id);
                }
                if(report.refcore.design.mods[id] == undefined){
                    report.refcore.loadModule(id);
                }
                var refMod = report.refcore.design.modName[report.core.design.mods[id].name];
                if(refMod != undefined){
                    var refModData = report.refcore.mods[refMod.id];
                    if(refModData != undefined){
                        gap = formatGap(modIt.value, refModData.value, isTime);
                        data.push({"value":[report.core.design.mods[id].name, formatData(modIt.value, report.core.status.isTime), formatData(refModData.value, report.core.status.isTime, report.refcore), gap], "child":"tobeload", "aid":{"mid":id, "core":report.core}, "onclick":report.displayModuleWrapper1});
                        refMod.touch = 1;
                    }else
                        data.push({"value":[report.core.design.mods[id].name, formatData(modIt.value, report.core.status.isTime), "--", {"value":formatData(modIt.value, report.core.status.isTime), "className":"simp_right simp_table_red"}], "child":"tobeload", "aid":{"mid":id, "core":report.core}, "onclick":report.displayModuleWrapper1});
                }else
                    data.push({"value":[report.core.design.mods[id].name, formatData(modIt.value, report.core.status.isTime), "--", {"value":formatData(modIt.value, report.core.status.isTime), "className":"simp_right simp_table_red"}], "child":"tobeload", "aid":{"mid":id, "core":report.core}, "onclick":report.displayModuleWrapper1});
                modIt = modIt.next;
            }
            modIt = report.refcore.firstMod;
            while(modIt){
                var id = modIt.id;
                if(report.refcore.design.mods[id] == undefined){
                    report.refcore.loadModule(id);
                }
                if(report.refcore.design.mods[id].touch!=1){
                    data.push({"value":[report.refcore.design.mods[id].name, "--", formatData(modIt.value, report.core.status.isTime), {"value":formatData(modIt.value, report.core.status.isTime, report.refcore), "className":"simp_right simp_table_green"}], "child":"tobeload", "aid":{"mid":id, "core":report.refcore}, "onclick":report.displayModuleWrapper1});
                }
                modIt = modIt.next;
            }
            var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog.toString(), report.core.status.isTime), formatData(report.refcore.curVerilog.toString(), report.core.status.isTime), ""], "data":data, "select":"simp_main", "head":head});
            table.genTable();
        }
    },

    getFullPathFromFileDir : function(){
        var file = arguments[0];
        var dir = arguments[1];
                if(file[0] == "\/"){
            return file;
                }
        var farr = file.split("\.\.");
        var darr = dir.split("\/");
        var len = darr.length - (farr.length - 1);
        var full = "";

        for(var i = 0; i < len; i++){
            full += "\/" + darr[i];
        }
        full += "\/" + farr[farr.length - 1];
        return full;
    },

    genSolverReport : function(){
        var head = arguments[0];
        var msg = arguments[1];
        var stat = arguments[2];
        var tabs = arguments[3];
        var ctn = arguments[4];
        var i = 0;
        var j = 0;
        var k = 0;

        if(head){
            var objH1 = document.createElement("h1");
            objH1.innerHTML = head;
            ctn.appendChild(objH1);
        }
        if(msg){
            var objH2 = document.createElement("h2");
            objH2.innerHTML = msg;
            ctn.appendChild(objH2);
        }
        if(stat && stat.length > 0){
            var objTab = document.createElement("table");
            objTab.className = "simp_table";

            for(i = 0; i < stat.length; i++){
                var objRow = objTab.insertRow(-1);
                objRow.className = (i % 2 == 0) ? "simp_odd" : "simp_even";

                var objTD = objRow.insertCell(-1);
                objTD.className = "simp_left";
                objTD.innerHTML = stat[i];
            }
            ctn.appendChild(objTab);
        }
        if(tabs && tabs.length > 0){
            for(i = 0; i < tabs.length; i++){
                var objBr = document.createElement("br");
                ctn.appendChild(objBr);

                var objCaption = document.createElement("h2");
                objCaption.innerHTML = tabs[i].title;
                ctn.appendChild(objCaption);

                var objTab = document.createElement("table");
                objTab.className = "simp_table";

                var srcInfoId = -1;
                var randPartId = -1;
                var parseFileName = /File\:line/;
                var parserBrowser = /Firefox|SeaMonkey/;
                var column = tabs[i].head.length;
                var objHead = objTab.insertRow(0);
                objHead.className = "simp_tableTH";
                for(j = 0; j < column; j++){
                    var objTH = document.createElement("th");
                    objTH.innerHTML = tabs[i].head[j] + "&nbsp;";
                    objTH.className = "simp_center";
                    objHead.appendChild(objTH);
                    if(parseFileName.test(tabs[i].head[j])){
                        srcInfoId = j;
                    }
                }

                for(j = 0; j < tabs[i].data.length; j++){
                    var objRow = objTab.insertRow(-1);
                    objRow.className = (j % 2 == 0) ? "simp_odd" : "simp_even";

                    for(k = 0; k < tabs[i].data[j].length; k++){
                        var objTD = objRow.insertCell(-1);
                        var item = tabs[i].data[j][k];

                        if(k == 0){
                            objTD.className = "simp_left";
                        }else{
                            objTD.className = "simp_right";
                        }

                        if(srcInfoId == k && parserBrowser.test(navigator.userAgent)){
                            var fullPath = tabs[i].more[j][0];
                            objTD.innerHTML = ' <a href="javascript:void(0)" onclick = "var src=new RptCode(\''+fullPath+'\'); return false;">'+item+'</a>';
                            objTD.className = objTD.className + " simp_cursor simp_blue";
                        }else{
                            objTD.innerHTML = item;
                        }
                    }
                }
                var objFoot = objTab.insertRow(-1);
                objFoot.className = "simp_total";
                for(k = 0; k < column; k++){
                    var objTD = objFoot.insertCell(-1);
                    objTD.innerHTML = "&nbsp;";
                }
                ctn.appendChild(objTab);
            }
        }
    },

    genReport : function(){
        report.clearDiv();
        var simpmain = document.getElementById("simp_main");
        simpmain.style.overflow="scroll";
        var clockdiv = document.createElement("div");
        var maindiv = document.createElement("div");
        var secdiv = document.createElement("div");
        var thirddiv = document.createElement("div");
        maindiv.id = "simp_main1";
        secdiv.id = "simp_main2";
        thirddiv.id = "simp_main3";
        simpmain.appendChild(clockdiv);
        simpmain.appendChild(maindiv);
        simpmain.appendChild(secdiv);
        simpmain.appendChild(thirddiv);
        if(report.core.status.curType == 29){
            var head = "EventCounter Instance View";
            var title = ["Instance", "Inclusive Counts", "Percentage", "Exclusive Counts", "Percentage"];
            isTime = 3;
            report.core.status.isTime = 3;
            var data = [];
            if (report.core.curVerilog) {
                report.core.loadTimeOrMemoryInstance(0, 1); // load root instance
                if(report.core.insts[0].child != undefined){
                    for(var i = 0; i < report.core.insts[0].child.length; i++){
                        var id = report.core.insts[0].child[i];
                        if(report.core.insts[id] == undefined){
                            report.core.loadTimeOrMemoryInstance(id);
                        }
                        if(report.core.design.insts[id] == undefined){
                            report.core.loadInstance(id);
                        }
                        if(report.core.insts[id]){
                        data.push({"value":[report.core.design.insts[id].name, formatData(report.core.insts[id].inclvalue, isTime),(report.core.insts[id].inclvalue*100.0/report.core.curTotal).toFixed(2).toString()+" %", formatData(report.core.insts[id].value, 3), (report.core.insts[id].value*100.0/report.core.curTotal).toFixed(2).toString()+" %"], "child":"tobeload", "aid":id, "onclick":report.genInstDetail});
                    }
                    }
                }
            }
            
            var table = new RptTable({"title":title, "total":[], "data":data, "select":"simp_main1", "head":head});
            
            table.genTable();
        }
        if(report.core.status.curType!=4&&report.core.status.curType!=12&&report.core.status.curType!=13&&report.core.status.curType!=29&&report.core.status.curType!=40&&report.core.status.curType!=41&&report.core.status.curType!=43&&report.core.status.curType!=44){
            var tmp = report.core.status.curType;
            report.core.status.curType = 1;
            report.core.loadTimeOrMemoryModule();
            report.core.status.curType = tmp;
        }
        if(!report.core.status.isTime&&report.core.status.curType!=4&&report.core.status.curType!=12&&report.core.status.curType!=13&&report.core.status.curType!=29&&report.core.status.curType!=40&&report.core.status.curType!=41&&report.core.status.curType!=43&&report.core.status.curType!=44){
            var cycle = 0;
            if(report.core.status.curSnap == 0)
                cycle = report.core.hsp[report.core.hpeak].cycle;
            else
                cycle = report.core.hsp[report.core.status.curSnap - 1].cycle;
        }
        if(report.core.files == null){
            report.core.loadFiles();
        }
        if(report.core.status.curType == 0){
            report.core.loadTimeOrMemoryEntry();
            report.loadTimeOrMemoryEntryCallback();
        }else if(report.core.status.curType == 1){
            var isLight = report.core.dbs[report.core.status.curDB].light;
            if(report.core.status.isTime){
                var isCounter = report.core.dbs[report.maincore.status.curDB].counter;
                var head = (isCounter? "Counter ": "") + "Time Module View";
                if (isLight)
                    var title = ["Module", isCounter? "Exclusive Count": "Exclusive Time", "Percentage"];
                else
                    var title = ["Module", isCounter? "Inclusive Count": "Inclusive Time", "Percentage", isCounter? "Exclusive Count": "Exclusive Time", "Percentage"];
            }else{
                var head = "Memory Module View";
                if (isLight)
                    var title = ["Module", "Exclusive Size", "Percentage"];
                else
                    var title = ["Module", "Inclusive Size", "Percentage", "Exclusive Size", "Percentage"];
                head = head + " (Simulation time:" + cycle + ")";
            }
            var data = [];
            var modIt = report.core.firstMod;
            while(modIt){
                var id = modIt.id;
                if(report.core.design.mods[id] == undefined && modIt.ivalue != undefined){
                    report.core.loadModule(id);
                }
                if (isLight)
                    data.push({"value":[report.core.design.mods[id].name, formatData(modIt.value, report.core.status.isTime), (modIt.value*100.0/report.core.curTotal).toFixed(2).toString()+" %"], "child":"tobeload", "aid":id, "onclick":report.genModDetail});
                else {
                    var tm = report.core.status.isTime;
                    var ct = report.core.curTotal;
                    var iv = "--";
                    var ivp = "--";
                    var oc = report.genTotalDetail;
                    var n = modIt.name;
                    if (modIt.ivalue != undefined)  {
                        iv = formatData(modIt.ivalue, tm);
                        var ivpv = modIt.ivalue * 100.0 / ct
                        ivp = ivpv.toFixed(2).toString() + " %";
                        oc = report.genModDetail;
                        n = report.core.design.mods[id].name;
                    }
                    var v = formatData(modIt.value, tm);
                    var vpv = modIt.value * 100.0 / ct;
                    var vp = vpv.toFixed(2).toString() + " %";
                    var rowData = [n, iv, ivp, v, vp];
                    data.push({"value":rowData, "child":"tobeload", "aid":id, "onclick":oc});
                    if (modIt.svalue != undefined) {
                        v = formatData(modIt.svalue, tm);
                        vpv = modIt.svalue * 100.0 / ct;
                        vp = vpv.toFixed(2).toString() + " %";
                        rowData = [n + " (shared)", "--", "--", v, vp]
                        data.push({"value":rowData, "child":"tobeload", "aid":id, "onclick":oc})
                    }
                }
                modIt = modIt.next;
            }
            if (isLight)
                data.push([report.core.dbs[report.core.status.curDB].filter, formatData(report.core.modfilter, report.core.status.isTime), (report.core.modfilter*100.0/report.core.curTotal).toFixed(2).toString()+" %"])
            else
                data.push([report.core.dbs[report.core.status.curDB].filter, formatData(report.core.modfilter, report.core.status.isTime), (report.core.modfilter*100.0/report.core.curTotal).toFixed(2).toString()+" %", formatData(report.core.modfilter, report.core.status.isTime), (report.core.modfilter*100.0/report.core.curTotal).toFixed(2).toString()+" %"])
            if (isLight)
                var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog, report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %"], "data":data, "select":"simp_main1", "head":head});
            else
                var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog, report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %", formatData(report.core.curVerilog, report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %"], "data":data, "select":"simp_main1", "head":head});
            table.genTable();
            report.displayCurDBInfo();
        }else if(report.core.status.curType == 2){
            if(report.core.status.isTime){
                var isCounter = report.core.dbs[report.maincore.status.curDB].counter;
                var head = (isCounter? "Counter ": "") + "Time Instance View";
                var title = ["Instance", isCounter? "Inclusive Count": "Inclusive Time", "Percentage", isCounter? "Exclusive Count": "Exclusive Time", "Percentage"];
            }else{
                var head = "Memory Instance View";
                var title = ["Instance", "Inclusive Size", "Percentage", "Exclusive Size", "Percentage"];
                head = head + " (Simulation time:" + cycle + ")";
            }

            var data = [];
            if (report.core.curVerilog) {
                report.core.loadTimeOrMemoryInstance(0, 1); // load root instance
                if(report.core.insts[0].child != undefined){
                    for(var i = 0; i < report.core.insts[0].child.length; i++){
                        var id = report.core.insts[0].child[i];
                        if(report.core.insts[id] == undefined){
                            report.core.loadTimeOrMemoryInstance(id);
                        }
                        if(report.core.design.insts[id] == undefined){
                            report.core.loadInstance(id);
                        }
                        data.push({"value":[report.core.design.insts[id].name, formatData(report.core.insts[id].inclvalue, report.core.status.isTime),(report.core.insts[id].inclvalue*100/report.core.curTotal).toFixed(2).toString()+" %", formatData(report.core.insts[id].value,report.core.status.isTime), (report.core.insts[id].value*100/report.core.curTotal).toFixed(2).toString()+" %"], "child":"tobeload", "aid":id, "onclick":report.genInstDetail});
                    }
                }
            }
            var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog.toString(), report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %", formatData(report.core.curVerilog.toString(), report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %"], "data":data, "select":"simp_main1", "head":head});
            table.genTable();
            report.displayCurDBInfo();
        }else if(report.core.status.curType == 3){
            report.core.loadTimeOrMemoryConstr();
            if(report.core.status.isTime){
                var isCounter = report.core.dbs[report.maincore.status.curDB].counter;
                var head = (isCounter? "Counter ": "") + "Time Construct View";
                var title = ["Name", isCounter? "Count": "Time", "Percentage"];
            }else{
                var head = "Memory Construct View";
                var title = ["Name", "Size", "Percentage"];
                head = head + " (Simulation time:" + cycle + ")";
            }
            var data = [];
            for(var i in report.core.types){
                data.push({"value":[i, formatData(report.core.types[i].value, report.core.status.isTime), (report.core.types[i].value*100/report.core.curTotal).toFixed(2).toString()+" %"], "child":"tobeload", "aid":i, "onclick":report.genTypeDetail});
            }
            var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog.toString(), report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %"], "data":data, "select":"simp_main1", "head":head});
            table.genTable();
            report.displayCurDBInfo();
        }else if(report.core.status.curType == 4){
            if(!report.core.checkSolverXML()){
                var ctn = document.getElementById("simp_main1");
                var head = report.core.status.isTime ? "Time Constraint Solver View" : "Memory Constraint Solver View";
                var msg = "No solver report, since the option \"-simprofile nosolver\" has been specified when running simulation.";
                var stat = [];
                var tabs = [];
                report.genSolverReport(head, msg, stat, tabs, ctn);
                return;
            }
            report.core.loadTimeOrMemorySolver();
            if(report.core.status.isTime){
                var _solver = report.core.solver;
                var ctn = document.getElementById("simp_main1");
                var head = "Time Constraint Solver View";
                var stat = [];
                var tabs = [];
                if(_solver.totalUTime && _solver.totalSTime && _solver.totalRandUTime && _solver.totalRandCount){
                    stat[0] = "Total user time: "+_solver.totalUTime+"seconds";
                    stat[1] = "Total system time: "+_solver.totalSTime+"seconds";
                    stat[2] = "Total randomize time: "+_solver.totalRandUTime+"seconds";
                    stat[3] = "Total randomize count: "+_solver.totalRandCount;
                }
                if(_solver.topContextProfs && _solver.topUTimeRands && _solver.topUTimeParts && _solver.topBDDParts && _solver.topAggrUTimeRands){
                    var tab = {};
                    tab.title = "Top randomize calls based on cpu runtime";
                    tab.head = ["File:line@visit", "serial#", "time (sec)", "variables", "constraints", "cnst blocks"];
                    tab.data = [];
                    tab.more = [];
                    for(var i in _solver.topUTimeRands){
                        var _node = _solver.topUTimeRands[i];
                        tab.data.push([_node.file + ":" + _node.line + "@" + _node.visit,
                                       _node.serial,
                                       _node.utime,
                                       _node.vars,
                                       _node.cons,
                                       _node.cblks]);
                        var fullPath = report.getFullPathFromFileDir(_node.file, _solver.simvBaseDir);
                        var fullPathAndLine = fullPath + ":" + _node.line + "-" + _node.line;
                        tab.more.push([fullPathAndLine]);
                    }
                    tabs[0] = tab;

                    tab = {};
                    tab.title = "Top randomize calls based on cumulative cpu runtime";
                    tab.head = ["File:line", "calls", "time (sec)"];
                    tab.data = [];
                    tab.more = [];
                    for(var i in _solver.topAggrUTimeRands){
                        var _node = _solver.topAggrUTimeRands[i];
                        tab.data.push([_node.file + ":" + _node.line,
                                       _node.calls,
                                       _node.utime]);
                        var fullPath = report.getFullPathFromFileDir(_node.file, _solver.simvBaseDir);
                        var fullPathAndLine = fullPath + ":" + _node.line + "-" + _node.line;
                        tab.more.push([fullPathAndLine]);
                    }
                    tabs[1] = tab;

                    tab = {};
                    tab.title = "Top partitions based on cpu time";
                    tab.head = ["File:line@visit", "Rand.Partition", "cpu time (sec)", "variables", "constraints", "cnst blocks"];
                    tab.data = [];
                    tab.more = [];
                    for(var i in _solver.topUTimeParts){
                        var _node = _solver.topUTimeParts[i];
                        tab.data.push([_node.file + ":" + _node.line + "@" + _node.visit,
                                       _node.serial + "." + _node.partition_id,
                                       _node.utime,
                                       _node.vars,
                                       _node.cons,
                                       _node.cblks]);
                        var fullPath = report.getFullPathFromFileDir(_node.file, _solver.simvBaseDir);
                        var fullPathAndLine = fullPath + ":" + _node.line + "-" + _node.line;
                        tab.more.push([fullPathAndLine]);
                    }
                    tabs[2] = tab;

                    tab = {};
                    tab.title = "Constraint solver profile";
                    tab.head = ["Solver", "Time (sec)"];
                    tab.data = [];
                    for(var i in _solver.topContextProfs){
                        tab.data.push([_solver.topContextProfs[i].solver,
                                       _solver.topContextProfs[i].ttime]);
                    }
                    tabs[3] = tab;

                    tab = {};
                    tab.title = "Top partitions based on BDD size";
                    tab.head = ["File:line@visit", "Rand.Partition", "peak BDD size", "final BDD size", "variables", "constraints", "cnst blocks"];
                    tab.data = [];
                    tab.more = [];
                    for(var i in _solver.topBDDParts){
                        var _node = _solver.topBDDParts[i];
                        tab.data.push([_node.file + ":" + _node.line + "@" + _node.visit,
                                       _node.serial + "." + _node.partition_id,
                                       _node.peak_bdd_size,
                                       _node.final_bdd_size,
                                       _node.vars,
                                       _node.cons,
                                       _node.cblks]);
                        var fullPath = report.getFullPathFromFileDir(_node.file, _solver.simvBaseDir);
                        var fullPathAndLine = fullPath + ":" + _node.line + "-" + _node.line;
                        tab.more.push([fullPathAndLine]);
                    }
                    tabs[4] = tab;
                }

                report.genSolverReport(head, "", stat, tabs, ctn);
            }else{
                var _solver = report.core.solver;
                var ctn = document.getElementById("simp_main1");
                var head = "Memory Constraint Solver View";
                var stat = [];
                var tabs = [];
                if(_solver.largestIncMem != undefined){
                    stat[0] = "Largest memory increment: "+_solver.largestIncMem+"KB";
                }
                if(_solver.topMemRands != undefined &&
                   _solver.topMemLineRands != undefined){
                    var tab = {};
                    tab.title = "Top randomize calls based on memory increment";
                    tab.head = ["File:line@visit", "serial#", "mem incr (KB)", "variables", "constraints", "cnst blocks"];
                    tab.data = [];
                    tab.more = [];
                    for(var i in _solver.topMemRands){
                        var _node = _solver.topMemRands[i];
                        tab.data.push([_node.file + ":" + _node.line + "@" + _node.visit,
                                       _node.serial,
                                       _node.mem,
                                       _node.vars,
                                       _node.cons,
                                       _node.cblks]);
                        var fullPath = report.getFullPathFromFileDir(_node.file, _solver.simvBaseDir);
                        var fullPathAndLine = fullPath + ":" + _node.line + "-" + _node.line;
                        tab.more.push([fullPathAndLine]);
                    }
                    tabs[0] = tab;

                    tab = {};
                    tab.title = "Top recurring randomize calls based on memory increment";
                    tab.head = ["File:line", "calls", "mem incr (KB)"];
                    tab.data = [];
                    tab.more = [];
                    for(var i in _solver.topMemLineRands){
                        var _node = _solver.topMemLineRands[i];
                        tab.data.push([_node.file + ":" + _node.line,
                                       _node.calls,
                                       _node.mem]);
                        var fullPath = report.getFullPathFromFileDir(_node.file, _solver.simvBaseDir);
                        var fullPathAndLine = fullPath + ":" + _node.line + "-" + _node.line;
                        tab.more.push([fullPathAndLine]);
                    }
                    tabs[1] = tab;
                }
                report.genSolverReport(head, "", stat, tabs, ctn);
            }
            report.displayCurDBInfo();
        }else if(report.core.status.curType == 5) {
            report.core.loadTimeOrMemoryCoverage();
            if(report.core.status.isTime){
                var head = "Time Coverage View";
                var title = ["Name", "Time", "Percentage", "Source Information"];
            }else{
                var head = "Memory Coverage View";
                var title = ["Name", "Size", "Percentage", "Source Information"];
                head = head + " (Simulation time:" + cycle + ")";
            }
            var data = [];
            for (var i=0; i < report.core.cgs.length; i++){
                var cg = report.core.cgs[i];
                data.push([{"value":cg.name, "indent": 0}, formatData(cg.value, report.core.status.isTime), (cg.value*100/report.core.curTotal).toFixed(2).toString()+" %", {"value":report.core.files[cg.fileid]+":"+cg.start+"-"+cg.end, "src":2}]);
                if (cg.child && cg.child.length) {
                    for(var j=0; j < cg.child.length; j++) {
                        var ccg = cg.child[j];
                        data.push([{"value":ccg.name, "indent": 1}, formatData(ccg.value, report.core.status.isTime), (ccg.value*100/report.core.curTotal).toFixed(2).toString()+" %", {"value":report.core.files[ccg.fileid]+":"+ccg.start+"-"+ccg.end, "src":2}]);
                    }
                }
                if (cg.insts && cg.insts.length) {
                    data.push([{"value": "coverage instance(s)", "indent": 1}, "&nbsp;", "&nbsp;", "&nbsp;"]);
                    for(var j=0; j < cg.insts.length; j++) {
                        var fcg = cg.insts[j];
                        data.push([{"value":fcg.name, "indent": 2}, formatData(fcg.value, report.core.status.isTime), (fcg.value*100/report.core.curTotal).toFixed(2).toString()+" %", "&nbsp;"]);
                        if(fcg.child && fcg.child.length){
                            for(var k=0; k < cg.child.length; k++){
                                var fccg = fcg.child[k];
                                data.push([{"value":fccg.name, "indent": 3}, formatData(fccg.value, report.core.status.isTime), (fccg.value*100/report.core.curTotal).toFixed(2).toString()+" %", "&nbsp;"]);
                            }
                        }
                    }
                }
            }
            var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog.toString(), report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %"], "data":data, "select":"simp_main1", "head":head});
            table.genTable();
            report.displayCurDBInfo();
        }else if(report.core.status.curType == 12){
            report.core.loadClocks();
            report.core.loadDynamic();
            report.displayCurDBInfo();
        }else if(report.core.status.curType == 13){
            report.genTimeline();
        }else if(report.core.status.curType == 40){
            simpmain.style.overflow="visible";
            report.genCallerCalleeView(0);
        }else if(report.core.status.curType == 41){
            simpmain.style.overflow="visible";
            report.genCallerCalleeView(1);
        }else if(report.core.status.curType == 43){
            simpmain.style.overflow="visible";
            report.genRawView(1);
        }else if(report.core.status.curType == 44){
            simpmain.style.overflow="visible";
            report.genRawView(0);
        }else if(report.core.status.curType == 42){
            report.core.loadPLIlearn();
            var plilearn = report.core.plilearn;

            var head = "PLI Debug Capability View";
            var title = ["Stat.", "read", "read_write", "callback", "callback_all", "force", "static"];
            var data = [];
            PLI_MAJOR_STAT.forEach(function(stat){
                PLI_MINOR_STAT.forEach(function(minor_stat){
                    var linedata = [];
                    var title;
                    if (minor_stat.need_prefix) {
                        title = stat+minor_stat.name_suffix;
                    } else {
                        title = minor_stat.name_suffix;
                    }
                    linedata.push(title);
                    for (var i=0; i < plilearn["stat"].length; i++){
                        var value = plilearn["stat"][i][stat+minor_stat.key_suffix];

                        switch (minor_stat.value_type) {
                        case "percent":
                            value = value + " %";
                            break;
                        case "time":
                            value = formatData(value, 1);
                            break;
                        }
                        if (minor_stat.has_details) {
                            linedata.push({
                                "value": value, 
                                "onclick": report.displayPLIModules, 
                                "aid": {
                                    "cap":ALL_CAPS[i],
                                    "stat":stat,
                                    "num":value
                                }
                            });
                        } else {
                            linedata.push(value);
                        }
                    }
                    data.push(linedata);
                });
            });
            var table = new RptTable({"title":title, "data":data, "select":"simp_main1", "head":head});
            table.nofoot = true;
            table.genTable();

            var textInfo1 = document.createElement("p");
            var textInfo2 = document.createElement("p");
            var textInfo3 = document.createElement("p");
            var fullModLink = document.createElement("a");
            textInfo3.appendChild(fullModLink);
            secdiv.appendChild(textInfo1);
            secdiv.appendChild(textInfo2);
            secdiv.appendChild(textInfo3);
            secdiv.style.margin = "0 auto";
            secdiv.style.width = "90%";

            textInfo1.innerHTML += "Capabilities enabled but no module uses: ";
            if (plilearn["noused"].length > 0) {
                textInfo1.innerHTML += plilearn["noused"].join(', ');
            } else {
                textInfo1.innerHTML += "N/A"
            }

            textInfo2.innerHTML += "Capabilities enabled and used by all modules: ";
            if (plilearn["allused"].length > 0) {
                textInfo2.innerHTML += plilearn["allused"].join(', ');
            } else {
                textInfo2.innerHTML += "N/A"
            }

            fullModLink.onclick = report.displayPLIAllModules;
            fullModLink.innerHTML = "show full module list";

            report.displayPLIAllModules();

        }else if(report.core.status.curType > 19 ){
            report.core.loadTimeOrMemorySlot();
            if(report.core.status.isTime){
                var isCounter = report.core.dbs[report.maincore.status.curDB].counter;
                var head = (isCounter? "Counter ": "") + "Time " +  report.core.dbs[report.core.status.curDB].slots[report.core.status.curType - 20].name + " View";
                var title = ["Name", isCounter? "Count": "Time", "Percentage"];
                if(report.core.slot_columns.length > 0) {
                    for(var i = 0; i < report.core.slot_columns.length; i++) {
                        title.push(report.core.slot_columns[i]);
                    }
                }
            }else{
                var head = "Memory " +  report.core.dbs[report.core.status.curDB].slots[report.core.status.curType - 20].name + " View";
                var title = ["Name", "Size", "Percentage"];
                head = head + " (Simulation time:" + cycle + ")";
            }
            var data = [];
            for(var i in report.core.slots){
                if(!report.core.slots[i].root)
                    continue;
                else
                    report.genSlotDetail(data, report.core.slots[i], 0, report.core.slot_columns);
            }
            var table = new RptTable({"title":title, "total":["total", formatData(report.core.curVerilog.toString(), report.core.status.isTime), (report.core.curVerilog*100/report.core.curTotal).toFixed(2).toString()+" %"], "data":data, "select":"simp_main1", "head":head});
            table.genTable();
            report.displayCurDBInfo();
        }
    },

    genCallerCalleeView : function() {
        var isTime = arguments[0];
        if (isTime) {
            document.getElementById('simp_main').innerHTML = "<iframe id='content_frame' name='content_frame' scrolling='no' frameborder=0 width='100%' marginwidth=0 marginheight=0 height='100%' src=" + "'./" + report.core.dir + "/xmldir.0/caller/node1Time.html" + "'></iframe>";
        } else {
            document.getElementById('simp_main').innerHTML = "<iframe id='content_frame' name='content_frame' scrolling='no' frameborder=0 width='100%' marginwidth=0 marginheight=0 height='100%' src=" + "'./" + report.core.dir + "/xmldir.0/caller/node1Peak.html" + "'></iframe>";
        }
    },

    genRawView : function() {
        var isTime = arguments[0];
        if (isTime) {
            document.getElementById('simp_main').innerHTML = "<iframe id='content_frame' name='content_frame' scrolling='no' frameborder=0 width='100%' marginwidth=0 marginheight=0 height='100%' src=" + "'./" + report.core.dir + "/xmldir.0/raw/node0Time.html" + "'></iframe>";
        } else {
            document.getElementById('simp_main').innerHTML = "<iframe id='content_frame' name='content_frame' scrolling='no' frameborder=0 width='100%' marginwidth=0 marginheight=0 height='100%' src=" + "'./" + report.core.dir + "/xmldir.0/raw/node0SnapshotRaw.html" + "'></iframe>";
        }
    },

    genSlotDetail : function(){
        var data = arguments[0];
        var slot = arguments[1];
        var indent = arguments[2];
        var slot_columns = arguments[3];
        var data_items = [{"value":slot.name, "indent": indent, "src":1}, formatData(slot.value, report.core.status.isTime), (slot.value*100/report.core.curTotal).toFixed(2).toString()+" %"]
        if(slot_columns.length > 0) {
            for(var i = 0; i < slot_columns.length; i++) {
                colValue = slot.colValues[slot_columns[i]];
                if(!colValue) {
                    colValue = "";
                }
                data_items.push(colValue);
            }
        }
        data.push(data_items);
        if(slot.child && slot.child.length != 0){
            for(var i = 0; i < slot.child.length; i++){
                report.genSlotDetail(data, report.core.slots[slot.child[i]], indent+1, slot_columns);
                report.core.slots[slot.child[i]].root = 0;
            }
        }
    },

    genInstDetail : function(){
        var inst = report.core.insts[this.aid];
        var isTime = report.core.status.isTime;
        if(inst.child && inst.child.length){
            var children = [];
            for(var i = 0; i < inst.child.length; i++){
                var id = inst.child[i];
                if(report.core.insts[id] ==  undefined){
                    report.core.loadTimeOrMemoryInstance(id);
                }
                if(report.core.design.insts[id] == undefined){
                    report.core.loadInstance(id);
                }
                var child = {"value":[report.core.design.insts[id].name, formatData(report.core.insts[id].inclvalue, isTime), (report.core.insts[id].inclvalue*100/report.core.curTotal).toFixed(2).toString()+" %", formatData(report.core.insts[id].value, isTime),(report.core.insts[id].value*100/report.core.curTotal).toFixed(2).toString()+" %"],"child":"tobeload", "aid":id, "onclick":report.genInstDetail};
                children.push(child);
            }
            this.data.child = children;
        }else{
            this.data.child = null;
        }
        this.data.onclick = report.hideInstDetail;
        this.table.genTable();
        report.displayInstance(this.aid);
    },

    displayInstance : function(){
        var inst = report.core.design.insts[arguments[0]];
        var instData = report.core.insts[arguments[0]];
        var isCmpInst = arguments[1];
        var cmpInst = arguments[2];
        var isTime = report.core.status.isTime;
        var data = [];
        if(isCmpInst == 1){
            data.push(["Instance Name", inst.name]);
        }else{
            data.push(["Instance Name", inst.fullname]);
            if(isTime){
                data.push(["Exclusive Time", formatData(instData.value, isTime)]);
            }else{
                data.push(["Exclusive Memory", formatData(instData.value, isTime)]);
            }
            data.push(["Exclusive Percentage", (instData.value*100/report.core.curTotal).toFixed(2).toString()+" %"]);
            if(isTime){
                data.push(["Inclusive Time", formatData(instData.inclvalue, isTime)]);
            }else{
                data.push(["Inclusive Memory", formatData(instData.inclvalue, isTime)]);
            }
            data.push(["Inclusive Percentage", (instData.inclvalue*100/report.core.curTotal).toFixed(2).toString()+" %"]);
            if(report.core.design.mods[inst.pid] == undefined && inst.pid!=0){
                report.core.loadModule(inst.pid);
            }
        }
        if(report.core.design.mods[inst.mid] == undefined){
            report.core.loadModule(inst.mid);
        }
        if (isCmpInst && cmpInst && cmpInst.mads.length > 1) {
            for (var i=0; i < cmpInst.mads.length; i++) {
                var s = report.core.design.mods[cmpInst.mads[i].mid].name + ": " + formatData(cmpInst.mads[i].value, isTime) + ", " +
                        (cmpInst.value*100/report.core.curTotal).toFixed(2).toString()+"%";
                data.push(["Master Module", {"value":s, "onclick":report.displayModuleWrapper, "aid":cmpInst.mads[i].mid}]);
            }
        } else {
            data.push(["Master Module", {"value":report.core.design.mods[inst.mid].name, "onclick":report.displayModuleWrapper, "aid":inst.mid}]);
        }
        if(inst.pid != 0)
            data.push(["Parent Module", {"value":report.core.design.mods[inst.pid].name, "onclick":report.displayModuleWrapper, "aid":inst.pid}]);
        if (isCmpInst != 1) {
            if(instData.instNo == undefined)
                data.push(["Child Instance Number", 0]);
            else
                data.push(["Child Instance Number", instData.instNo]);
        }
        if(inst.fileid==0)
            data.push(["Source Information", report.core.files[inst.fileid]]);
        else
            data.push(["Source Information", report.core.files[inst.fileid]+":"+inst.line]);
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Instance Information"});
        table.nofoot = true;
        table.genTable();
    },

    hideInstDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genInstDetail;
        report.displayInstance(this.aid);
        this.table.genTable();
    },

    genTypeDetail : function(){
        var type = report.core.types[this.aid];
        if(type.constr && type.constr.length){
            var children = [];
            for(var i = 0; i < type.constr.length; i++){
                var constr = type.constr[i];
                if(report.core.design.mods[constr.mid]==undefined){
                    report.core.loadModule(constr.mid);
                }
                var mod = report.core.design.mods[constr.mid];
                var constrDesign = mod.constr[constr.id];
                var child = [{"value":constrDesign.name, "className":"simp_left simp_cursor", "onclick":report.displayConstr1, "aid":{"mid":constr.mid, "cid":constr.id, "value":constr.value}}, formatData(constr.value, report.core.status.isTime), (constr.value*100/report.core.curTotal).toFixed(2).toString()+" %"];
                children.push(child);
            }
            this.data.child = children;
        }else{
            this.data.child = null;
        }
        this.data.onclick = report.hideTypeDetail;
        this.table.genTable();
    },

    displayConstr1 : function(){
        var mod = report.core.design.mods[this.aid.mid];
        var value = this.aid.value;
        var constr = mod.constr[this.aid.cid];
        var isTime = report.core.status.isTime;
        var data = [["Construct Name", constr.name]];
        if(isTime)
            data.push(["Time", formatData(value, isTime)]);
        else
            data.push(["Memory", formatData(value, isTime)]);
        data.push(["Constuct Type", constr.type]);
        data.push(["Parent Module", {value:mod.name, "onclick":report.displayModuleWrapper, "aid":this.aid.mid}]);
        if(constr.fileid==0)
            data.push(["Source Information", report.core.files[constr.fileid]]);
        else
            data.push(["Source Information", report.core.files[constr.fileid]+":"+constr.line+"-"+constr.end, this.aid.mid]);
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Construct Information"});
        table.nofoot = true;
        table.genTable();
    },

    hideTypeDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genTypeDetail;
        this.table.genTable();
    },

    genTotalDetail : function(){
        var totalData = report.core.mods[this.aid];
        var isTime = report.core.status.isTime;
        var isLight = report.core.dbs[report.core.status.curDB].light;
        var children = [];
        for (var i = 0; i < totalData.params.length; i++) {
            if (report.core.design.mods[totalData.params[i].id] == undefined) {
                report.core.loadModule(totalData.params[i].id);
            }

            var paramData = [report.core.design.mods[totalData.params[i].id].name,formatData(totalData.params[i].ivalue, report.core.status.isTime),(totalData.params[i].ivalue*100/report.core.curTotal).toFixed(2).toString()+" %",formatData(totalData.params[i].value,report.core.status.isTime),(totalData.params[i].value*100/report.core.curTotal).toFixed(2).toString()+"%"];
            children.push({"indent":2,
                  "value":paramData,"child":"tobeload","pid":totalData.params[i].id,"num":i,
                  "aid":totalData.params[i].id, "onclick":report.genModDetail});
        }
        this.data.child = children;
        this.data.onclick = report.hideTotalInstanceDetail;
        this.data.aid = this.aid;
    this.table.genTable();
    },
    genModDetail : function(){
        var module = report.core.design.mods[this.aid];
        var moduleData = report.core.mods[this.aid];
        var children = [];
        var isTime = report.core.status.isTime;
        var isLight = report.core.dbs[report.core.status.curDB].light;
        if(moduleData.hasConstr === 1){
            for(var i in moduleData.constr){
                if (isLight)
                    children.push({"value":[i, formatData(moduleData.ctotal[i], isTime), (moduleData.ctotal[i]*100.0/report.core.curTotal).toFixed(2).toString()+" %"], "aid":{"mid":this.aid, "tid":i}, "onclick":report.genModConstrDetail, "className":"simp_left simp_cursor", "child":"tobeload"});
                else
                    children.push({"value":[i, formatData(moduleData.ctotal[i], isTime), (moduleData.ctotal[i]*100.0/report.core.curTotal).toFixed(2).toString()+" %", formatData(moduleData.ctotal[i], isTime), (moduleData.ctotal[i]*100.0/report.core.curTotal).toFixed(2).toString()+" %"], "aid":{"mid":this.aid, "tid":i}, "onclick":report.genModConstrDetail, "className":"simp_left simp_cursor", "child":"tobeload"});
            }
        }else{
            this.data.child = null;
        }
        if(moduleData.inst && moduleData.inst.length){
            children.push({"value":["child instance", formatData(moduleData.itotal, isTime), (moduleData.itotal*100.0/report.core.curTotal).toFixed(2).toString()+" %", "--", "--"], "aid":this.aid, "onclick":report.genModInstanceDetail, "className":"simp_left simp_cursor", "child":"tobeload"});
            this.data.child = children;
        }else{
            this.data.child = null;
        }
        this.data.child = children;
        this.data.onclick = report.hideModInstanceDetail;
        this.data.aid = this.aid;
        this.table.genTable();
        report.displayModule(this.aid);
    },

    genModConstrDetail : function(){
        var children = [];
        var module = report.core.design.mods[this.aid.mid];
        var moduleData = report.core.mods[this.aid.mid];
        var isTime = report.core.status.isTime;
        var isLight = report.core.dbs[report.core.status.curDB].light;
        for(var i = 0; i < moduleData.constr[this.aid.tid].length; i++){
            if(moduleData.constr[this.aid.tid][i].filter==undefined){
                if (isLight)
                    var child = {
                        "value":[module.constr[moduleData.constr[this.aid.tid][i].id].name,
                                 formatData(moduleData.constr[this.aid.tid][i].value, isTime),
                                 (moduleData.constr[this.aid.tid][i].value*100/report.core.curTotal).toFixed(2).toString()+" %"],
                        "aid":{"mid":this.aid.mid, "cid":moduleData.constr[this.aid.tid][i].id},
                        "onclick":report.genConstrDetail,
                        "child":"tobeload",
                        "className":"simp_left simp_cursor"
                    }
                else
                    var child = {
                        "value":[module.constr[moduleData.constr[this.aid.tid][i].id].name,
                                 formatData(moduleData.constr[this.aid.tid][i].value, isTime),
                                 (moduleData.constr[this.aid.tid][i].value*100/report.core.curTotal).toFixed(2).toString()+" %",
                                 formatData(moduleData.constr[this.aid.tid][i].value, isTime),
                                 (moduleData.constr[this.aid.tid][i].value*100/report.core.curTotal).toFixed(2).toString()+" %"],
                        "aid":{"mid":this.aid.mid, "cid":moduleData.constr[this.aid.tid][i].id},
                        "onclick":report.genConstrDetail,
                        "child":"tobeload",
                        "className":"simp_left simp_cursor"
                    }
            }else{
                if (isLight)
                    child = [report.core.dbs[report.core.status.curDB].filter, formatData(moduleData.constr[this.aid.tid][i].value, isTime), (moduleData.constr[this.aid.tid][i].value*100/report.core.curTotal).toFixed(2).toString()+" %"];
                else
                    child = [report.core.dbs[report.core.status.curDB].filter, formatData(moduleData.constr[this.aid.tid][i].value, isTime), (moduleData.constr[this.aid.tid][i].value*100/report.core.curTotal).toFixed(2).toString()+" %", formatData(moduleData.constr[this.aid.tid][i].value, isTime), (moduleData.constr[this.aid.tid][i].value*100/report.core.curTotal).toFixed(2).toString()+" %"];
            }
            children.push(child);
        }
        this.data.child = children;
        this.data.onclick = report.hideModConstrDetail;
        this.data.aid = this.aid;
        this.table.genTable();
        report.displayModule(this.aid.mid);
    },

    hideModConstrDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genModConstrDetail;
        this.table.genTable();
    },

    hideConstrDetail : function() {
        this.data.child = "tobeload";
        this.data.onclick = report.genConstrDetail;
        this.table.genTable();
    },

    genModInstanceDetail : function(){
        var children = [];
        var module = report.core.design.mods[this.aid];
        var moduleData = report.core.mods[this.aid];
        var isTime = report.core.status.isTime;
        for(var i = 0; i < moduleData.inst.length; i++){
            report.core.status.curType = 1 + parseInt(report.core.status.curType);
            var instId = moduleData.inst[i].id;
            if(report.core.insts[instId] == undefined){
                report.core.loadTimeOrMemoryInstance(instId);
            }
            if(report.core.design.insts[instId] == undefined){
                report.core.loadInstance(instId);
            }
            report.core.status.curType -= 1;
            var child = [{"value":report.core.design.insts[moduleData.inst[i].id].name, "aid":moduleData.inst[i], "onclick":report.displayInstanceWrapper, "className":"simp_left simp_cursor"}, formatData(moduleData.inst[i].ivalue, isTime), (moduleData.inst[i].ivalue*100/report.core.curTotal).toFixed(2).toString()+" %", formatData(moduleData.inst[i].value, isTime), (moduleData.inst[i].value*100/report.core.curTotal).toFixed(2).toString()+" %"];
            children.push(child);
        }
        if(moduleData.ifilter > 0)
            children.push([report.core.dbs[report.core.status.curDB].filter, formatData(moduleData.ifilter, isTime), (moduleData.ifilter*100/report.core.curTotal).toFixed(2).toString()+" %", "--", "--"]);
        this.data.child = children;
        this.data.onclick = report.hideModInstanceDetail;
        this.data.aid = this.aid;
        this.table.genTable();
        report.displayModule(this.aid);
    },

    displayInstanceWrapper : function(){
        report.displayInstance(this.aid.id, 1, this.aid);
    },

    hideTotalInstanceDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genTotalDetail;
        this.table.genTable();
    },
    hideModInstanceDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genModDetail;
        this.table.genTable();
    },

    genTimeline : function(){
        report.clearDiv();
        report.core.loadTimeline();
        var data = [];
        var max = {};
        var min = {};
        var button = document.createElement("input");
        button.type = "button";
        button.id = "timelineFmt";
        if(report.timelineFmt == 1)
            button.value = "Display percentage";
        else
            button.value = "Display size";
        button.onclick = report.changeTimelineFmt;
        var div = document.createElement("div");
        div.id = "simp_tlmain";
        var simpmain = document.getElementById("simp_main");
        simpmain.appendChild(button);
        simpmain.appendChild(div);

        for(var i = 0; i < report.core.sps.length; i++){
            var sps = report.core.sps[i];
            var aid = {"curDB":report.core.status.curDB, "curType":12, "curSnap":i+1, "isTime":report.core.status.isTime};
            var snapshot = [{"value":"#"+i.toString(), "onclick":report.genReportWrapper, "aid":aid}, sps.cycle];
            var k = 0;
            for (var j in sps.info){
                if(max[j] == undefined){
                    max[j] = {};
                    max[j].id = k;
                    max[j].sp = i;
                    max[j].value = sps.info[j];
                }else{
                    if(sps.info[j] > max[j].value){
                        max[j].sp = i;
                        max[j].value = sps.info[j];
                    }
                }
                if(min[j] == undefined){
                    min[j] = {};
                    min[j].sp = i;
                    min[j].id = k;
                    min[j].value = sps.info[j];
                }else{
                    if(sps.info[j] < min[j].value){
                        min[j].sp = i;
                        min[j].value = sps.info[j]
                    }
                }
                if(report.timelineFmt == 1)
                    snapshot.push(formatData(sps.info[j]));
                else
                    snapshot.push((sps.info[j]/sps.info.total*100).toFixed(2).toString()+" %");
                k = k + 1;
            }
            data.push(snapshot);
        }
        for(var j in min){
            var obj = {};
            if(report.timelineFmt == 1)
                obj.value = formatData(report.core.sps[min[j].sp].info[j]);
            else
                obj.value = (report.core.sps[min[j].sp].info[j]/report.core.sps[min[j].sp].info.total*100).toFixed(2).toString()+" %";
            obj.className = "simp_table_green simp_right";
            data[min[j].sp][min[j].id+2] = obj;
        }
        for(var j in max){
            var obj = {};
            if(report.timelineFmt == 1)
                obj.value = formatData(report.core.sps[max[j].sp].info[j]);
            else
                obj.value = (report.core.sps[max[j].sp].info[j]/report.core.sps[max[j].sp].info.total*100).toFixed(2).toString()+ " %";
            obj.className = "simp_table_red simp_right";
            data[max[j].sp][max[j].id+2] = obj;
        }
        var table = new RptTable({"title":["", "Simulation time","Assoc-Aarry", "Dynamic Array", "Smart Queue", "Event", "Mailbox", "String", "Class", "Total"], "total":["&nbsp", "&nbsp", "&nbsp", "", "", "", "", "", "", ""], "data":data, "select":"simp_tlmain", "head":"Dynamic Memory Timeline"});
        table.genTable();
    },

    changeTimelineFmt : function(){
        if(report.timelineFmt == 1){
            report.timelineFmt = 0;
        }else{
            report.timelineFmt = 1;
        }
        report.genTimeline();
    },

    genReportWrapper : function(){
        report.core.status.curDB = this.aid.curDB;
        report.core.status.curType = this.aid.curType;
        report.core.status.curSnap = this.aid.curSnap;
        report.core.status.isTime = this.aid.isTime;
        report.genReport();
    },

    genConstrDetail : function(){
        var moduleData = report.core.mods[this.aid.mid];
        var constr = moduleData.ids[this.aid.cid];
        var module = report.core.design.mods[this.aid.mid];
        var children = [];
        var isTime = report.core.status.isTime;
        if (constr.child.length) {
            for (var i=0; i < constr.child.length; i++) {
                children.push({
                    "value":[module.constr[constr.child[i].id].name, formatData(constr.child[i].value, isTime),
                             (constr.child[i].value*100.0/report.core.curTotal).toFixed(2).toString()+" %",
                             formatData(constr.child[i].value, isTime),
                             (constr.child[i].value*100.0/report.core.curTotal).toFixed(2).toString()+" %"],
                    "aid":{"mid":this.aid.mid, "cid":constr.child[i].id},
                    "onclick":report.genConstrDetail,
                    "className":"simp_left simp_cursor",
                    "child":null});
            }
        }
        this.data.child = children;
        this.data.onclick = report.hideConstrDetail;
        this.table.genTable();
        report.displayConstr(this.aid.mid, this.aid.cid);
    },

    hideModDetail : function(){
        this.data.child = "tobeload";
        this.data.onclick = report.genModDetail;
        report.displayModule(this.aid);
        this.table.genTable();
    },

    displayModule : function(){
        if(report.core.design.mods[arguments[0]]==undefined){
            report.core.loadModule(arguments[0]);
        }
        if(report.core.mods[arguments[0]]==undefined){
            var tmp = report.core.status.curType;
            report.core.status.curType = 1;
            report.core.loadTimeOrMemoryModule();
            report.core.status.curType = tmp;
        }
        var mod = report.core.design.mods[arguments[0]];
        var modData = report.core.mods[arguments[0]];
        var isTime = report.core.status.isTime;
        var data = [["Module Name", mod.name]];
        data.push(["Module type", mod.type]);
        if(modData != undefined){
            if(isTime)
                data.push(["Time", formatData(modData.value, isTime)]);
            else
                data.push(["Memory", formatData(modData.value, isTime)]);
            data.push(["Percentage", (modData.value*100/report.core.curTotal).toFixed(2).toString()+" %"]);
        }else{
            if(isTime)
                data.push(["Time", "filtered"]);
            else
                data.push(["Memory", "filtered"]);
            data.push(["Percentage", "filtered"]);
        }
        data.push(["Self Instances Number", mod.instno]);
        data.push(["Child Instances Number", mod.cinstno]);
        if(mod.fileid==0)
            data.push(["Source Information", report.core.files[mod.fileid]]);
        else
            data.push(["Source Information", report.core.files[mod.fileid]+":"+mod.startline+"-"+mod.endline, arguments[0]]);
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Module Information"});
        table.nofoot = true;
        table.genTable();
    },

    displayPLIAllModules: function(){
        var USAGE_DISPLAY = ["", "Enabled", "Used"];
        var title = ["Module", "Exclusive Time"].concat(ALL_CAPS);

        var data = [];
        var modIt = report.core.firstMod;
        while(modIt){
            var id = modIt.id;
            var mod = modIt;
            var name = modIt.name;
            var timevalue = modIt.value;
            if (modIt.ivalue != undefined) {
                if(!report.core.design.mods[id]){
                    report.core.loadModule(id);
                }
                mod = report.core.design.mods[id];
                name = mod.name;
            } else {
                ALL_CAPS.forEach(function(cap){
                    mod[cap] = 0;
                    modIt.params.forEach(function(param){
                        report.core.loadModule(param.id);
                        var pmod = report.core.design.mods[param.id];
                        mod[cap] |= pmod[cap];
                    });
                    if (mod[cap] == 3) {
                        mod[cap] = 2;
                    }
                });
            }
            if (USAGE_DISPLAY[mod[ALL_CAPS[0]]] != undefined) {
                var linedata = [];
                linedata.push(name);
                linedata.push(formatData(timevalue, 1));
                ALL_CAPS.forEach(function(cap){
                    linedata.push(USAGE_DISPLAY[mod[cap]]);
                });
                data.push(linedata);
            }

            modIt = modIt.next;
        }

        var table = new RptTable({
            "title":title, 
            "data":data, 
            "select":"simp_board",
            "head":"Full Module View"});
        table.genTable();
    },
    displayPLIModules : function(){
        var opts = this.aid;

        var USAGE_DISPLAY = ["", "Enabled", "Used"];
        var title = ["Module", "Exclusive Time"];

        var data = [];
        var modIt = report.core.firstMod;
        while(modIt){
            var id = modIt.id;
            var mod = modIt;
            var name = modIt.name;
            var timevalue = modIt.value;
            if (modIt.ivalue != undefined) {
                if(!report.core.design.mods[id]){
                    report.core.loadModule(id);
                }
                mod = report.core.design.mods[id];
                name = mod.name;
            } else {
                ALL_CAPS.forEach(function(cap){
                    mod[cap] = 0;
                    modIt.params.forEach(function(param){
                        report.core.loadModule(param.id);
                        var pmod = report.core.design.mods[param.id];
                        mod[cap] |= pmod[cap];
                    });
                    if (mod[cap] == 3) {
                        mod[cap] = 1;
                    }
                });
            }
            function isEligible(opts, mod) {
                switch(opts.stat){
                case "enabled":
                    return mod[opts.cap] == 1 || mod[opts.cap] == 2;
                case "used":
                    return mod[opts.cap] == 2;
                case "unused":
                    return mod[opts.cap] == 1;
                }
                return false;
            }
            if (isEligible(opts, mod)) {
                data.push([name, formatData(timevalue, 1)]);
            }
            modIt = modIt.next;
        }

        var table = new RptTable({
            "title":title, 
            "data":data, 
            "select":"simp_board", 
            "head":"Module("+opts.cap+" "+opts.stat+") List"});
        table.genTable();

        if (data.length < opts.num) {
            var simpboard = document.getElementById("simp_board");
            var footerdiv = document.createElement("div");
            footerdiv.id = "simp_board_footer";
            footerdiv.style.margin = "0 auto";
            footerdiv.style.width = "90%";
            simpboard.appendChild(footerdiv);
            footerdiv.innerHTML = "Due to the filter, only " + data.length + " out of " + opts.num + " modules are shown."; 
        }
    },

    displayModuleWrapper : function(){
        report.displayModule(this.aid);
    },

    displayModuleWrapper1 : function(){
        var prev = report.core;
        report.core = this.aid.core;
        if(report.core.design.mods[this.aid.mid]==undefined){
            report.core.loadModule(this.aid.mid);
        }
        if(report.core.mods[this.aid.mid]==undefined){
            var tmp = report.core.status.curType;
            report.core.status.curType = 1;
            report.core.loadTimeOrMemoryModule();
            report.core.status.curType = tmp;
        }
        report.displayModule(this.aid.mid);
        report.core = prev;
    },

    displayConstr : function(){
        var mod = report.core.design.mods[arguments[0]];
        var moduleData = report.core.mods[arguments[0]];
        var constrData = moduleData.ids[arguments[1]];
        var constr = mod.constr[constrData.id];
        var isTime = report.core.status.isTime;
        var data = [["Construct Name", constr.name]];
        if(isTime)
            data.push(["Time", formatData(constrData.value, isTime)]);
        else
            data.push(["Memory", formatData(constrData.value, isTime)]);
        data.push(["Constuct Type", constr.type]);
        data.push(["Parent Module", {value:mod.name, "onclick":report.displayModuleWrapper, "aid":arguments[0]}]);
        if(constr.fileid==0)
            data.push(["Source Information", report.core.files[constr.fileid]]);
        else
            data.push(["Source Information", report.core.files[constr.fileid]+":"+constr.line+"-"+constr.end, arguments[0]]);
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Construct Information"});
        table.nofoot = true;
        table.genTable();
    },

    displaySummaryConstrMemory : function(){
        var constr = report.core.totalConstrMem[this.aid];
        var data = [["Constr Name", constr.name]];
        data.push(["Memory", formatMemory(constr.mem)]);
        var mod = report.core.totalModuleMemId[constr.parent];
        data.push(["Parent Module", {value:mod.name, "onclick":report.displaySummaryModuleMem, "aid":mod}]);
        if("Source File Unknown"==constr.file){
            data.push(["Source Information", constr.file]);
        }else{
            data.push(["Source Information", constr.file+":"+constr.start+"-"+constr.end]);
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Construct Information"});
        table.nofoot = true;
        table.genTable();
    },

    displaySummaryConstrTime : function(){
        var constr = report.core.totalConstrTime[this.aid];
        var data = [["Constr Name", constr.name]];
        data.push(["Time", formatTime(constr.time)]);
        var mod = report.core.totalModuleTimeId[constr.parent];
        data.push(["Parent Module", {value:mod.name, "onclick":report.displaySummaryModuleTime, "aid":mod}]);
        if("Source File Unknown"==constr.file){
            data.push(["Source Information", constr.file]);
        }else{
            data.push(["Source Information", constr.file+":"+constr.start+"-"+constr.end]);
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Construct Information"});
        table.nofoot = true;
        table.genTable();
    },

    displaySummaryModuleMem : function(){
        var mod = this.aid;
        var data = [["Module Name", mod.name]];
        data.push(["Memory", formatMemory(mod.mem)]);
        //data.push(["Inclusive Memory", formatMemory(mod.imem)]);
        data.push(["Self Instances Number", mod.inst]);
        data.push(["Child Instances Number", mod.cinst]);
        if("Source File Unknown"==mod.file){
            data.push(["Source Information", mod.file]);
        }else{
            data.push(["Source Information", mod.file+":"+mod.begin+"-"+mod.end]);
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Module Information"});
        table.nofoot = true;
        table.genTable();
    },

    displaySummaryModuleTime : function(){
        var mod = this.aid;
        var data = [["Module Name", mod.name]];
        data.push(["Time", formatTime(mod.time)]);
        //data.push(["Inclusive Time", formatTime(mod.itime)]);
        data.push(["Self Instances Number", mod.inst]);
        data.push(["Child Instances Number", mod.cinst]);
        if("Source File Unknown"==mod.file){
            data.push(["Source Information", mod.file]);
        }else{
            data.push(["Source Information", mod.file+":"+mod.begin+"-"+mod.end]);
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Module Information"});
        table.nofoot = true;
        table.genTable();
    },

    displaySummaryInstanceTime : function(){
        var inst = report.core.totalInstTime[this.aid];
        var data = [["Instance Name", inst.name]];
        data.push(["Time", formatTime(inst.time)]);
        if("Source File Unknown"==inst.file){
            data.push(["Source Information", inst.file]);
        }else{
            data.push(["Source Information", inst.file+":"+inst.begin]);
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Instance Information"});
        table.nofoot = true;
        table.genTable();
    },

    displaySummaryInstanceMem : function(){
        var inst = report.core.totalInstMem[this.aid];
        var data = [["Instance Name", inst.name]];
        data.push(["Memory", formatMemory(inst.mem)]);
        if("Source File Unknown"==inst.file){
            data.push(["Source Information", inst.file]);
        }else{
            data.push(["Source Information", inst.file+":"+inst.begin]);
        }
        var table = new RptTable({"title":["&nbsp",""], "total":["&nbsp", "&nbsp"], "data":data, "select":"simp_board", "head":"Instance Information"});
        table.nofoot = true;
        table.genTable();
    },

    execute : function(){
        var sdb = document.getElementById("dbselect");
        var stype = document.getElementById("typeselect");
        var ssnap = document.getElementById("snapselect");
        var go = document.getElementById("confirm");
        var refsl = document.getElementById("refselect");
        var genRef = document.getElementById("genDiff");
        sdb.onchange = report.changeDB;
        stype.onchange = report.changeType;
        ssnap.onchange = report.changeSnap;
        go.onclick = report.genReport;

        if(this.isref == 1){
            var rsdb = document.getElementById("rdbselect");
            var rstype = document.getElementById("rtypeselect");
            var rssnap = document.getElementById("rsnapselect");
            rsdb.onchange = report.changeRefDB;
            rstype.onchange = report.changeRefType;
            rssnap.onchange = report.changeRefSnap;
            this.refcore = new ReportCore({"dir":filedir+"_ref"});
            this.refcore.loadInfoXmlCallback = this.loadRefInfoCallback;
            this.refcore.loadInfoXml();
            this.refcore.loadTotalDataCallback = this.genTotalDiff;
            this.core.loadTotalDataCallback = this.genTotalDiff;
        }else{
            this.core.loadTotalDataCallback = this.loadTotalDataCallback;
            this.core.loadTotalModuleCallback = this.loadTotalModuleCallback;
            this.core.loadTotalInstCallback = this.loadTotalInstCallback;
            this.core.loadTotalConstrCallback = this.loadTotalConstrCallback;
        }
        this.core.loadInfoXmlCallback = this.loadInfoXmlCallback;
        this.core.loadDynamicCallback = this.loadDynamicCallback;
        this.core.loadInfoXml();
    }
}

function createXHR(){
    if (typeof XMLHttpRequest != "undefined"){
        return new XMLHttpRequest();
    } else if (typeof ActiveXObject != "undefined"){
        return new ActiveXObject("Microsoft.XMLHTTP");
    } else {
        alert("No XHR available, please update your browser!");
        return null;
    }
}

function createParse(text){
    var xmldom;
    if(typeof DOMParser != "undefined"){
        var parser = new DOMParser();
        xmldom = parser.parseFromString(text, "text/xml");
    }else if(typeof ActiveXObject != "undefined"){
        xmldom = new ActiveXObject("MSXML2.DOMDocument.6.0");
        xmldom.loadXML(text);
    }else{
        alert("Can't parse XML file!");
        return null;
    }
    return xmldom;
}

function formatTime(input){
    if(input > 1000000 || input < -1000000){
        return (input/1000000).toFixed(1).toString() + " s";
    }else if(input > 1000 || input < -1000){
        return (input/1000).toFixed(1).toString() + " ms";
    }else if (input === undefined){
        return "--";
    }else if (input == 0){
        return "0";
    }else{
        return input.toFixed(1).toString() + " us";
    }
}

function formatMemory(input){
    if(input > 1024*1024 || input < -1024*1024){
        return (input/1024/1024).toFixed(1).toString() + " MB";
    }else if(input > 1024 || input < -1024){
        return (input/1024).toFixed(1).toString() + " KB";
    }else if (input === undefined){
        return "--";
    }else if (input == 0){
        return "0 B";
    }else{
        return input.toFixed(1).toString() + " B";
    }
}

function formatGap(value, ref, type){
    var ret;
    var color = 0;
    if(type == 1){
        input = (value * report.core.dbs[report.core.status.curDB].cputime / report.core.curTotal - ref * report.refcore.dbs[report.refcore.status.curDB].cputime / report.refcore.curTotal) * 1000000;
        if(input<0)
            color = 1;
        if(input > 1000000 || input < -100000){
            ret = (input/1000000).toFixed(2).toString() + " s";
        }else if(input > 1000 || input < -1000){
            ret = (input/1000).toFixed(2).toString() + " ms";
        }else{
            ret = input.toFixed(2).toString() + "us";
        }
    }else{
        var input = value - ref;
        if(input<0)
            color = 1;
        if(input > 1048576 || input < -1048576){
            ret = (input/1048576).toFixed(2).toString() + " MB";
        }else if(input > 1024 || input < -1024){
            ret = (input/1024).toFixed(2).toString() + " KB";
        }else{
            ret = input.toString() + " B";
        }
    }
    if(color == 1){
        return {"value":ret, "className": "simp_right simp_table_green"};
    }else{
        return {"value":ret, "className": "simp_right simp_table_red"};
    }
}

/* type=1 : time, other : meomry */
function getTime(input){
}
function formatData(input, type, core){
    var ret = "";
    var _core = report.core;
    if(core)
        _core = core;

    if (type == 3) {
        return input.toString();
    };

    if(type == 1){
        if(report.core.status.curDB == "total")
            return input.toString();
        var isCounter = report.core.dbs[report.maincore.status.curDB].counter;
        if (isCounter) {
            return input;
        }
        ret = input * 1000000 * _core.dbs[_core.status.curDB].cputime / _core.curTotal;
        if(ret > 1000000){
            ret = (ret/1000000).toFixed(2).toString() + "s";
        }else if(ret > 1000){
            ret = (ret/1000).toFixed(2).toString() + "ms";
        }else{
            ret = ret.toFixed(2).toString() + "us";
        }
         return ret;
    }else{
        if(input > 1048576){
            ret = (input/1048576).toFixed(2).toString() + " MB";
        }else if(input > 1024){
            ret = (input/1024).toFixed(2).toString() + " KB";
        }else{
            ret = input.toString() + " B";
        }
    }
    return ret;
}

var filedir = window.location.pathname;
filedir = filedir.substr(filedir.lastIndexOf('/')+1);
filedir = filedir.substr(0, filedir.length-5);

var host = window.location.host;
function loadCSS(){
    var Uri = filedir+"/"+"style.css";
    var headObj = document.getElementsByTagName("head")[0];
    var cssLink = document.createElement("link");
    cssLink.setAttribute("rel", "stylesheet");
    cssLink.setAttribute("type", "text/css");
    cssLink.setAttribute("media", "screen");
    cssLink.setAttribute("href", Uri);
    headObj.appendChild(cssLink);
}
loadCSS();

function loadJS(){
    var Uri = filedir+"/"+"codePretty.js";
    var headObj = document.getElementsByTagName("head")[0];
    var js=document.createElement('script')
    js.setAttribute("type","text/javascript")
    js.setAttribute("src", Uri)
    headObj.appendChild(js);
}
loadJS();

var report = new ReportHTML({"dir":filedir, "host":host});
report.isref = 0;report.mm = 0;report.execute();
    </script>
</body>
</html>
